webpackJsonp([0],{1386:function(t,e,i){"use strict";var s=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var r,n=i(501),o=i(1387),a=i(1388);!function(t){t[t.Menu=0]="Menu",t[t.Game=1]="Game",t[t.Shop=2]="Shop",t[t.GameOver=3]="GameOver",t[t.Editor=4]="Editor"}(r||(r={}));var l=function(t){function e(){var e=t.call(this,{key:"MainScene"})||this;return e._ballsNumber=25,e._ballArray=[],e._preDefinedBallSpeed=.015,e._ballSpeed=e._preDefinedBallSpeed,e._ballArrayLength=0,e._debug=!1,e._ballType=3,e._pathSprites=[],e._levelNumber=1,e._isPlaying=!1,e._isGameOver=!1,e.PlayerObject=null,e._menuPlayRestart=[],e._menuPlayRestartIcon=null,e._menuStroke=null,e._menuDownButtons=[],e._menuAllButtons=[],e._topMenuText=[],e._bestScore=0,e._score=0,e._coins=0,e.ComboEndedSide=0,e._gameBackground=null,e.Room=-1,e.Music=!0,e.Sound=!1,e.BallsAreStopped=!1,e}return s(e,t),Object.defineProperty(e.prototype,"BallArray",{get:function(){return this._ballArray},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BallSpeed",{get:function(){return this._ballSpeed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BallArrayLength",{get:function(){return this._ballArrayLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Debug",{get:function(){return this._debug},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BallType",{get:function(){return this._ballType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PathObject",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PathSprites",{get:function(){return this._pathSprites},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsGameOver",{get:function(){return this._isGameOver},set:function(t){this._isGameOver=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BestScore",{get:function(){return this._bestScore},set:function(t){this._bestScore=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Score",{get:function(){return this._score},set:function(t){this._score=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Coins",{get:function(){return this._coins},set:function(t){this._coins=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EditorMode",{get:function(){return this._editorMode},enumerable:!0,configurable:!0}),e.prototype.XYtoVector2=function(t,e){return new Phaser.Math.Vector2(t,e)},e.prototype.computeBallRealPosition=function(t,e,i){var s=this._path.PathPoints,r=t>=0&&t<s.length?s[t]:s[0],n=r;return e>=0&&(n=e>=s.length?s[s.length-1]:s[e]),new Phaser.Math.Vector2(Phaser.Math.Interpolation.Linear([r.x,n.x],i),Phaser.Math.Interpolation.Linear([r.y,n.y],i))},e.prototype.setupBackground=function(){this._gameBackground=this.add.sprite(200,0,"Background_"+String(Phaser.Math.Between(1,10))).setScale(.5).setOrigin(.5,0),this._gameBackground.depth=0},e.prototype.setupMenuStroke=function(t){null===this._menuStroke&&(this._menuStroke=this.add.sprite(240,455,"Board").setScale(.72,.6).setOrigin(.5).setTint(2631720),this._menuStroke.depth=9),this._menuStroke.alpha=.5*t},e.prototype.setupMenuButtons=function(t){var e=[];return 0==this._menuAllButtons.length&&(this._menuPlayRestart=[],this._menuPlayRestart[0]=this.add.sprite(240,660,"RoundedRectangle").setScale(.6).setOrigin(.5).setTint(2614398),this._menuPlayRestart[0].depth=8,this._menuPlayRestart[1]=this.add.sprite(243,663,"RoundedRectangle").setScale(.6).setOrigin(.5).setTint(0),this._menuPlayRestart[1].depth=7,this._menuPlayRestart[1].alpha=.5,this._menuPlayRestartIcon=this.setupPlayButton(),this._menuDownButtons=this.setupDownMenuButtons(this._menuDownButtons),t?this._menuPlayRestartIcon.setTexture("PlayIcon"):this._menuPlayRestartIcon.setTexture("RestartIcon"),this._menuDownButtons.forEach(function(t){e=e.concat(t)}),this._menuPlayRestart.forEach(function(t){e=e.concat(t)}),e=e.concat(this._menuPlayRestartIcon)),e},e.prototype.setupPlayButton=function(){var t=this.add.sprite(240,660,"PlayIcon").setScale(.4).setOrigin(.5);return t.depth=8,t.setInteractive(),t.on("pointerdown",function(t){1===t.buttons&&this.loadGame(!1)},this),t},e.prototype.setupDownMenuButtons=function(t){return t[0]=this.add.sprite(194,775,"CubeIcon").setScale(.3).setOrigin(.5),t[0].depth=12,t[0].setInteractive(),t[1]=this.add.sprite(242,775,this.Music?"MusicOn":"MusicOff").setScale(.3).setOrigin(.5),t[1].depth=12,t[1].setInteractive(),t[2]=this.add.sprite(290,775,this.Sound?"SoundOn":"SoundOff").setScale(.3).setOrigin(.5),t[2].depth=12,t[2].setInteractive(),t[0].on("pointerdown",function(t){1===t.buttons&&this.loadShop()},this),t[1].on("pointerdown",function(e){1===e.buttons&&(this.Music?(t[1].setTexture("MusicOff"),this.Music=!1):(t[1].setTexture("MusicOn"),this.Music=!0))},this),t[2].on("pointerdown",function(e){1===e.buttons&&(this.Sound?(t[2].setTexture("SoundOff"),this.Sound=!1):(t[2].setTexture("SoundOn"),this.Sound=!0))},this),t},e.prototype.setupTopMenuText=function(t){if(0==this._topMenuText.length){var e={font:"35px Orbitron-Bold",fill:"#eddf14"},i={font:"35px Orbitron-Bold",fill:"#ffffff"},s=this.add.text(240,140,"",e);s.depth=15,s.setFontSize(38),s.setOrigin(.5),s.setText(t?"BALL LINE":"GAME OVER");var r=this.add.text(80,75,"",i);r.depth=15,r.setFontSize(28),r.setOrigin(.5),r.setText(String(this._bestScore));var n=this.add.text(240,60,"",i);n.depth=15,n.setFontSize(48),n.setOrigin(.5),n.setText(String(this._score));var o=this.add.text(400,75,"",i);o.depth=15,o.setFontSize(28),o.setOrigin(.5),o.setText(String(this._coins)),this._topMenuText[0]=s,this._topMenuText[1]=r,this._topMenuText[2]=n,this._topMenuText[3]=o}else this._topMenuText[0].visible=!0,this._topMenuText[0].setText(t?"Ball Line":"Game Over")},e.prototype.setupGroups=function(){this.PlayerBallPhysicsGroup=this.physics.add.group(),this.BallsPhysicsGroup=this.physics.add.group(),this.UpdateGroup=this.add.group(),this.UpdateGroup.runChildUpdate=!0},e.prototype.setupGameRules=function(){this.game.canvas.oncontextmenu=function(t){return t.preventDefault()},this.physics.world.setBounds(29,97,421,715,!0,!0,!0,!0),this.cameras.main.setBounds(0,0,480,900)},e.prototype.setupGameEnvironment=function(){this.add.sprite(240,450,"Board").setScale(.75).setOrigin(.5).setTint(2631720).depth=10,this.setupBackground(),this.setupGroups(),this.setupGameRules(),this._path=new o.Path(this),this.cursors=this.input.keyboard.createCursorKeys(),this._editorKey=this.input.keyboard.addKey("E")},e.prototype.changeBackground=function(){this._gameBackground.setTexture("Background_"+String(Phaser.Math.Between(1,10)))},e.prototype.updateTopMenuText=function(){0!==this._topMenuText.length&&(this._topMenuText[1].setText(String(this._bestScore)),this._topMenuText[2].setText(String(this._score)),this._topMenuText[3].setText(String(this._coins)))},e.prototype.createBalls=function(){for(var t=this._ballsNumber-1;t>=0;t--)this._ballArray[t]=new n.Ball(this,this._ballType,Phaser.Math.Between(0,2)),this._ballArray[t].ID=t,this._ballArray[t].CountID=t,this._ballArray[t].TweenStart=32*(t-this._ballsNumber),this._ballArray[t].TweenStart>=0?this._ballArray[t].TweenPosition=this._path.PathPoints[this._ballArray[t].TweenStart]:this._ballArray[t].TweenPosition=this._path.PathPoints[0];for(var t=0;t<this._ballsNumber;t++)this._ballArray[t].PrevBall=this._ballArray[t-1],this._ballArray[t].NextBall=this._ballArray[t+1];this._ballArray[0]._isMover=!0,this._ballArray[this._ballsNumber-1].NextBall=null,this.countBalls()},e.prototype.countBalls=function(){var t=0;this._ballArray.forEach(function(e){null!==e&&t++}),this._ballArrayLength=t,0===this._ballArrayLength&&this.IsPlaying&&this.loadGameOver()},e.prototype.clearBallsAndCoins=function(t){this._ballArray.forEach(function(t){null!=t&&t.destroy()}),this._ballArray=[],this._ballArrayLength=0,t&&(this.createBalls(),this.Room=r.Game,this._isPlaying=!0,this.PlayerObject=new a.Player(this,this._ballType,250,750))},e.prototype.saveLevel=function(){for(var t,e=[],i=0;i<this._path.CurvesArray.length;i++)for(var s=0;s<4;s++){var r=void 0;r=this.XYtoVector2(this._path.CurvesArray[i][s].x,this._path.CurvesArray[i][s].y),e[4*i+s]=r}t={curves:this._path.CurvesArray.length,curvesArray:e},localStorage.setItem("level",JSON.stringify(t)),console.log(localStorage.getItem("level"))},e.prototype.loadLevel=function(){var t=this.cache.json.get("Level"+this._levelNumber);this._pathSprites&&(this._pathSprites=[]);for(var e=0;e<t.curves;e++){for(var i=[],s=0;s<4;s++)i[s]=t.curvesArray[4*e+s];var r=this._path.addNewGraphics();this._path.CurvesArray[e]=this._path.createBezierCurve(i[0],i[1],i[2],i[3]),this._path.drawBezierCurve(this._path.CurvesArray[e],r)}this._path.PathPoints=this._path.createPointsFromCurvesArray(this._path.CurvesArray,!1),this._pathSprites=this._path.createSpriteFromCurveArray(this._path.GraphicsArray)},e.prototype.fullLoadLevel=function(t){this.clearBallsAndCoins(!t),this._editorMode=t,!t||this.createBalls()},e.prototype.loadMenu=function(){this.Room!=r.Menu&&(this.Room=r.Menu,this._isPlaying=!1,this.setupMenuStroke(!0),this.setupTopMenuText(!0),this._menuAllButtons=this.setupMenuButtons(!0))},e.prototype.loadGame=function(t){this.Room!=r.Game&&(this._isGameOver=!1,this._ballSpeed=.85,this._score=0,this.setupMenuStroke(!1),this.fullLoadLevel(!1),this._menuAllButtons.forEach(function(t){t.destroy()}),this._menuAllButtons=[],this._topMenuText[0].visible=!1,!t||this.changeBackground())},e.prototype.loadShop=function(){this.Room=r.Shop},e.prototype.loadGameOver=function(){this.Room!=r.GameOver&&(this.Room=r.GameOver,this._isPlaying=!1,this.PlayerObject.destroy(),this.setupMenuStroke(!0),this.setupTopMenuText(!1),this._menuAllButtons=this.setupMenuButtons(!1))},e.prototype.loadEditor=function(){this.Room=r.Editor},e.prototype.editorManagment=function(){Phaser.Input.Keyboard.JustDown(this.cursors.space)&&(this._path.PathPoints=this._path.createPointsFromCurvesArray(this._path.CurvesArray,!0),this.fullLoadLevel(!0)),this.input.on("pointerdown",function(t){this.EditorMode&&(1===t.buttons?this._ballSpeed=.015:2===t.buttons&&(this._ballSpeed=.075))},this),Phaser.Input.Keyboard.JustDown(this.cursors.right)&&this._path.deleteCurveTools(),Phaser.Input.Keyboard.JustDown(this.cursors.shift)&&this._path.addCurveTools(),Phaser.Input.Keyboard.JustDown(this.cursors.left)&&this._path.activateTools(),Phaser.Input.Keyboard.JustDown(this.cursors.down)&&this.saveLevel(),Phaser.Input.Keyboard.JustDown(this.cursors.up)&&this.fullLoadLevel(!1)},e.prototype.create=function(){this.setupGameEnvironment(),this.loadMenu(),this.loadLevel();var t={font:"15px Arial",fill:"#ff0044",align:"center"};this._editorText=this.add.text(50,110,"EDITOR MODE: OFF",t)},e.prototype.update=function(t,e){Phaser.Input.Keyboard.JustDown(this._editorKey)&&(this._editorMode=!this._editorMode),this._editorMode&&this.editorManagment(),this._isGameOver?this._ballSpeed=.3:this._ballSpeed>this._preDefinedBallSpeed&&(this._ballSpeed+=.04*(this._preDefinedBallSpeed-this._ballSpeed)),this._editorText.text="",this.updateTopMenuText()},e}(Phaser.Scene);e.default=l},1387:function(t,e,i){"use strict";var s=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var i=t.call(this,e,"")||this;return i._pathPoints=[],i._curves=[],i._graphicsArray=[],i._curveSprite=[],i._curvesNumber=0,i._scene=e,i._scene.UpdateGroup.add(i),i.create(),i}return s(e,t),Object.defineProperty(e.prototype,"Path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PathPoints",{get:function(){return this._pathPoints},set:function(t){this._pathPoints=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurvesArray",{get:function(){return this._curves},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"GraphicsArray",{get:function(){return this._graphicsArray},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurvesNumber",{get:function(){return this._curvesNumber},enumerable:!0,configurable:!0}),e.prototype.activateTools=function(){for(var t=0;t<1;t++)this._curves[t]=this.createBezierTools(t>0?this._curves[t-1]:null)},e.prototype.addCurveTools=function(){this._curves[this._curves.length]=this.createBezierTools(this._curves[this._curves.length-1])},e.prototype.deleteCurveTools=function(){var t=this._curves[this._curves.length-1];this.deleteBezierCurve(t,t[0].data.graphics),this._curves.pop(),this._curvesNumber--},e.prototype.addNewGraphics=function(){var t=this._scene.add.graphics();return t.depth=1,t.alpha=.2,t.clear(),this._graphicsArray.push(t),t},e.prototype.addNewBezierPoint=function(t,e){var i=this._scene.add.image(Phaser.Math.Between(100,200),Phaser.Math.Between(100,200),"Ball_1_a").setScale(.05).setOrigin(.5);return i.alpha=.5,i.depth=15,i.setTint(t[e]),i.setInteractive(),i},e.prototype.setupDrag=function(t){this._scene.input.setDraggable(t),this._scene.input.on("drag",function(t,e,i,s){e.x=i,e.y=s,this.drawBezierCurve(e.data.curve,e.data.graphics),null!=e.data.prevCurve&&this.drawBezierCurve(e.data.prevCurve,e.data.prevGraphics)},this)},e.prototype.createBezierCurve=function(t,e,i,s){var r=new Phaser.Curves.CubicBezier(t,e,i,s);return this._curves[this._curvesNumber++]=r,r},e.prototype.drawBezierCurve=function(t,e){e.clear(),e.lineStyle(40,0),t.draw(e),t.defaultDivisions=5,t.arcLengthDivisions=5},e.prototype.deleteBezierCurve=function(t,e){var i;i=1==this._curvesNumber?0:1;for(var s=i;s<t.length;s++)t[s].visible=0;e.clear(),this._graphicsArray.pop()},e.prototype.createBezierTools=function(t){for(var e=["0x00ff00","0x008800","0x880000","0xff0000"],i=[],s=0;s<4;s++)if(null!=t&&0==s)i[s]=t[3];else{var r=this.addNewBezierPoint(e,s);i[s]=r}for(var n=this.createBezierCurve(i[0],i[1],i[2],i[3]),o=this.addNewGraphics(),s=0;s<4;s++)i[s].data=null!=t&&0==s?{curve:n,graphics:o,prevCurve:t[3].data.curve,prevGraphics:t[3].data.graphics}:{curve:n,graphics:o,prevCurve:null,prevGraphics:null};return this.drawBezierCurve(n,o),this.setupDrag(i),i},e.prototype.createSpriteFromCurveArray=function(t,e){var i=this,s=[],r=-1;return t.forEach(function(t){t.generateTexture("Curve"+String(e)),s[++r]=i._scene.add.image(240,450,"Curve"+String(e)),s[r].alpha=.5,t.clear()}),s},e.prototype.createPointsFromCurvesArray=function(t,e){var i=[];return t.forEach(function(t){i=!0===e?i.concat(t[0].data.curve.getDistancePoints(1)):i.concat(t.getDistancePoints(1))}),this._scene.add.image(i[i.length-16].x,i[i.length-16].y,"Player_Circle").setScale(.15).setOrigin(.5),i},e.prototype.create=function(){},e.prototype.update=function(){},e}(Phaser.GameObjects.GameObject);e.Path=r},1388:function(t,e,i){"use strict";var s=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(1389),n=function(t){function e(e,i,s,r){var n=t.call(this,e,"")||this;return n._ball=null,n._isDestroyed=!1,n._scene=e,n._type=i,n._x=s,n._y=r,n._scene.UpdateGroup.add(n),n.create(),n}return s(e,t),Object.defineProperty(e.prototype,"Sprite",{get:function(){return this._sprite},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsDestroyed",{get:function(){return this._isDestroyed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"X",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.setupSprite=function(){var t=this._scene.physics.add.image(this._x,this._y,"Player_Circle").setScale(.15).setOrigin(.5);return t.depth=1,this._scene.physics.world.enableBody(t),t},e.prototype.destroy=function(){this._scene.PlayerObject=null,this._isDestroyed=!0,this._ball.destroy(!1),this._sprite.destroy()},e.prototype.userInteraction=function(){var t=this._scene.input.activePointer,e=Phaser.Math.Angle.Between(this._x,this._y,t.x+this._scene.cameras.main.scrollX,t.y+this._scene.cameras.main.scrollY);this._ball.Sprite.rotation=e,this._scene.input.on("pointerdown",function(t){this._isDestroyed||this._scene.EditorMode||!this._scene.IsPlaying||this._scene.IsGameOver||1===t.buttons&&null!=this._ball&&this._ball.Scale>.04&&(this._ball.shoot(this._ball.Sprite.rotation),this._ball=null)},this)},e.prototype.createNewBall=function(){this._ball=null===this._ball?new r.Player_Ball(this._scene,this._type,this._x,this._y):null},e.prototype.create=function(){this._sprite=this.setupSprite(),this.createNewBall()},e.prototype.update=function(){this._isDestroyed||this._scene.EditorMode||!this._scene.IsPlaying||this._scene.IsGameOver||this._scene.Room===this._scene.RoomGameOver||null!=this._ball&&this.userInteraction()},e}(Phaser.GameObjects.GameObject);e.Player=n},1389:function(t,e,i){"use strict";var s=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(501),n=function(t){function e(e,i,s,r){var n=t.call(this,e,"")||this;return n._index=Phaser.Math.Between(0,2),n._moveValue=0,n._isDestroying=!1,n._scale=0,n._isDestroyed=!1,n._destroyCallTries=[0,0],n._dontCollide=!1,n._nextBallObject=null,n._moveBalls=!1,n._ballSubstitution=null,n._scene=e,n._type=i,n._x=s,n._y=r,n._scene.UpdateGroup.add(n),n.create(),n}return s(e,t),Object.defineProperty(e.prototype,"X",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Sprite",{get:function(){return this._sprite},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Scale",{get:function(){return this._scale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DontCollide",{get:function(){return this._dontCollide},set:function(t){this._dontCollide=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NextBallObject",{get:function(){return this._nextBallObject},set:function(t){this._nextBallObject=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MoveBalls",{get:function(){return this._moveBalls},set:function(t){this._moveBalls=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BallSubstitution",{get:function(){return this._ballSubstitution},set:function(t){this._ballSubstitution=t},enumerable:!0,configurable:!0}),e.prototype.setupSprite=function(){var t=String.fromCharCode(97+this._index),e=this._scene.physics.add.image(this._x,this._y,"Ball_"+String(this._type)+"_"+String(t)).setScale(.01).setOrigin(.5),i=.5*e.width;return e.depth=1,this._scene.PlayerBallPhysicsGroup.add(e),e.body.setCircle(i,0,0),e.body.bounce.set(1),e.body.setCollideWorldBounds(!0),e.body.onWorldBounds=!0,e.body.data={object:this},e},e.prototype.destroy=function(t){this._isDestroyed||(t&&(this._scene.BallsAreStopped=!1,this._moveBalls=!1,this._ballSubstitution.checkForCombo([this._ballSubstitution])),this._isDestroyed=!0,this._sprite.destroy())},e.prototype.shoot=function(t){this._scene.physics.velocityFromRotation(t,700,this._sprite.body.velocity)},e.prototype.collideWithBall=function(t,e){var i=t.body.data.object,s=e.body.data.object;if(!i._dontCollide){var n=null,o=this._scene.BallArray,a=null,l=null,h=null,u={TweenStart:0,TweenPos:0,TweenValue:0,ID:0},p=this._scene.PathObject.PathPoints,c=s.TweenStart-16>0?s.TweenStart-16:0,_=s.TweenStart-16>0?s.TweenStart-16:0,d=s.TweenStart+16<p.length?s.TweenStart+16:p.length-1,y=s.TweenStart+48<p.length?s.TweenStart+48:p.length-1,f=this._scene.computeBallRealPosition(c,_,s.TweenValue),b=this._scene.computeBallRealPosition(d,y,s.TweenValue),v=[f.x,f.y,i.Sprite.x,i.Sprite.y],g=[b.x,b.y,i.Sprite.x,i.Sprite.y],m=Phaser.Math.Distance.Between(v[0],v[1],v[2],v[3]);if(Phaser.Math.Distance.Between(g[0],g[1],g[2],g[3])<m){var P=void 0,S=void 0;a=s.NextBall,l=s,h=a,S=a||s,P=a?0:1,u={TweenStart:S.TweenStart+32*P,TweenPos:this._scene.PathObject.PathPoints[S.TweenStart+32*P],TweenValue:S.TweenValue,ID:S.ID+P}}else{var P=void 0,S=void 0;a=s.PrevBall,l=a,h=s,S=a||s,P=a?1:0,u={TweenStart:S.TweenStart+32*P,TweenPos:this._scene.PathObject.PathPoints[S.TweenStart+32*P],TweenValue:S.TweenValue,ID:S.ID+P}}n=new r.Ball(this._scene,this._type,this._index),n.Sprite.angle=this._sprite.angle,n.Sprite.alpha=0,n.TweenPosition=u.TweenPos,n.TweenStart=u.TweenStart,n.TweenValue=u.TweenValue,n.ID=u.ID,n.CountID=o.length,o[n.CountID]=n,n.PrevBall=l,n.NextBall=h,!l||(l.NextBall=n),!h||(h.PrevBall=n),h&&h.IsMover&&(n.IsMover=!0,h.IsMover=!1),n.movement(),this._scene.PlayerObject.createNewBall(),n.IsMover?this._scene.BallsAreStopped=!0:this.findMover(l),i.BallSubstitution=n,i.NextBallObject=h,i.MoveBalls=!0,i.DontCollide=!0}},e.prototype.findMover=function(t){null!=t&&(t.IsMover?this._scene.BallsAreStopped=!0:this.findMover(t.PrevBall))},e.prototype.moveToBallPos=function(t){var e,i=this;null!=(e=t?this._scene.computeBallRealPosition(t.TweenStart,t.TweenStart+32,t.TweenValue):null)&&(!this._sprite.body||this._sprite.body.setVelocity(.4),this._scene.add.tween({targets:[this._sprite],ease:"Quad",duration:50,delay:0,x:e.x,y:e.y,onComplete:function(){i.tryToCallDestroy(1)}}))},e.prototype.moveAllBalls=function(t,e,i){this._destroyCallTries[0]||(e&&e.moveAllNextBalls(t,i),t+=i,t<1?this._moveValue=t:this.lastAllBallsMove())},e.prototype.tryToCallDestroy=function(t){var e;this._destroyCallTries[t]=1,(e=this._destroyCallTries[0]+this._destroyCallTries[1])>0&&(this._ballSubstitution.Sprite.alpha=1,e>1&&this.destroy(!0))},e.prototype.lastAllBallsMove=function(){this.tryToCallDestroy(0)},e.prototype.create=function(){this._sprite=this.setupSprite(),this._scene.physics.add.overlap(this._sprite,this._scene.BallsPhysicsGroup,this.collideWithBall.bind(this))},e.prototype.update=function(){this._sprite.x<-64||this._sprite.x>544||this._sprite.y<-64||this._sprite.y>964?this.destroy(!1):(this._scale<.05&&(this._scale+=.005,this._sprite.setScale(this._scale)),this._moveBalls&&(this.moveAllBalls(this._moveValue,this._nextBallObject,.15),this.moveToBallPos(this._ballSubstitution)))},e}(Phaser.GameObjects.GameObject);e.Player_Ball=n},1390:function(t,e,i){"use strict";var s=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return t.call(this,{key:"Preloader"})||this}return s(e,t),e.prototype.preload=function(){this.load.image("CubeIcon","/assets/sprites/Menu/cube.png"),this.load.image("GiftBoxIcon","/assets/sprites/Menu/giftbox.png"),this.load.image("LockIcon","/assets/sprites/Menu/lock.png"),this.load.image("MusicOff","/assets/sprites/Menu/music_off.png"),this.load.image("MusicOn","/assets/sprites/Menu/music_on.png"),this.load.image("PlayIcon","/assets/sprites/Menu/play.png"),this.load.image("RestartIcon","/assets/sprites/Menu/restart.png"),this.load.image("RoundedRectangle","/assets/sprites/Menu/rounded.png"),this.load.image("SoundOff","/assets/sprites/Menu/sound_off.png"),this.load.image("SoundOn","/assets/sprites/Menu/sound_on.png"),this.load.image("Sunburst","/assets/sprites/Menu/sunburst.png"),this.load.image("UnlockIcon","/assets/sprites/Menu/unlock.png"),this.load.image("Board","/assets/sprites/board.png"),this.load.image("Player_Circle","/assets/sprites/circle.png"),this.load.json("Level1","/assets/levels/level1.json");for(var t=1;t<11;t++)this.load.image("Background_"+String(t),"/assets/sprites/Backgrounds/bg"+String(t)+".png");for(var t=1;t<12;t++)for(var e=0;e<3;e++){var i=String.fromCharCode(97+e);this.load.image("Ball_"+String(t)+"_"+String(i),"/assets/sprites/Balls/"+String(t)+String(i)+".png")}this.load.image("Bomb","/assets/sprites/Balls/bomb.png"),this.load.image("Coin","/assets/sprites/Balls/coin.png"),this.load.once("complete",function(){this.scene.start("MainScene")},this)},e}(Phaser.Scene);e.default=r},501:function(t,e,i){"use strict";var s=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,i,s){var r=t.call(this,e,"")||this;return r._index=0,r._isCheckedForCombo=!1,r._isDestroying=!1,r._tweenValue=0,r._id=-1,r._countID=-1,r._pointsArray=[],r._tweenStart=-1,r._next=null,r._prev=null,r._isMover=!1,r._isAlive=!0,r.overlapCollider=null,r._scene=e,r._type=i,r._index=s,r._scene.UpdateGroup.add(r),r.create(),r}return s(e,t),Object.defineProperty(e.prototype,"SpriteIndex",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsCheckedForCombo",{get:function(){return this._isCheckedForCombo},set:function(t){this._isCheckedForCombo=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TweenValue",{get:function(){return this._tweenValue},set:function(t){this._tweenValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ID",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CountID",{get:function(){return this._countID},set:function(t){this._countID=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TweenStart",{get:function(){return this._tweenStart},set:function(t){this._tweenStart=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TweenPosition",{get:function(){return this._tweenPosition},set:function(t){this._tweenPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NextBall",{get:function(){return this._next},set:function(t){this._next=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PrevBall",{get:function(){return this._prev},set:function(t){this._prev=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsMover",{get:function(){return this._isMover},set:function(t){this._isMover=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Sprite",{get:function(){return this._sprite},enumerable:!0,configurable:!0}),e.prototype.setupSprite=function(){var t=String.fromCharCode(97+this._index),e=this._scene.physics.add.image(0,0,"Ball_"+String(this._type)+"_"+String(t)).setScale(.06).setOrigin(.5),i=.5*e.width;return e.depth=1,e.angle=Phaser.Math.Between(0,360),e.setInteractive(),this._scene.physics.world.enableBody(e),this._scene.BallsPhysicsGroup.add(e),e.body.setCircle(i,0,0),e.body.data={object:this},e},e.prototype.setupDebugEnvironment=function(){this.graphics=this._scene.add.graphics(),this.graphics.depth=15,this.line=new Phaser.Geom.Line(0,0,0,0),this.line2=new Phaser.Geom.Line(0,0,0,0);var t={font:"15px Arial",fill:"#000000",align:"center"};this._idtext=this._scene.add.text(this.Sprite.x,this.Sprite.y,"0",t),this._idtext.depth=16,this._idtext.visible=!1},e.prototype.setupPathEnvironment=function(){this._pointsArray=this._scene.PathObject.PathPoints,this._pointsArrayLength=this._scene.PathObject.PathPoints.length},e.prototype.destroyAnimation=function(t){t>0?(t-=.009,this._sprite.setScale(t)):this.destroy()},e.prototype.destroy=function(){this._isAlive&&(this._isAlive=!1,this._next&&this._isMover&&(this._next._isMover=!0),this._prev&&(this._prev.NextBall=null,this._prev=null),this._next&&(this._next.PrevBall=null,this._next=null),this._scene.BallArray[this.CountID]=null,this._scene.countBalls(),this._sprite.destroy())},e.prototype.movement=function(){var t=this._scene.computeBallRealPosition(this._tweenStart,this._tweenStart+32,this._tweenValue);this._sprite.x=t.x,this._sprite.y=t.y,this.tweenMovementControl(this._scene.BallsAreStopped),this._next&&this._next.movement()},e.prototype.tweenMovementControl=function(t){var e=this._tweenStart+32;this._tweenValue<1?(t||(this._tweenValue+=this._scene.BallSpeed),this._tweenValue>=.5&&e>=this._pointsArrayLength-32&&!this._isDestroying&&this._scene.IsPlaying&&(this._isDestroying=!0,this._scene.IsGameOver=!0)):this.setNewPosition(e)},e.prototype.setNewPosition=function(t){if(this._tweenValue>=1)if(this._tweenValue=this._tweenValue-1,t>=this._pointsArrayLength-32||t<0){var e=t<0?0:this._tweenStart;this._tweenPosition=this._pointsArray[e],t<0?this._tweenStart+=32:this._tweenValue=1}else this._tweenStart+=32,this._tweenPosition=this._pointsArray[this._tweenStart]},e.prototype.increaseID=function(){this._id++,this._next&&this._next.increaseID()},e.prototype.moveAllNextBalls=function(t,e){this._tweenValue+=e,this.movement(),this._next&&this._next.moveAllNextBalls(t,e),0===t&&this.increaseID()},e.prototype.checkForCombo=function(t){var e=this,i=[this._next,this._prev],s=[null,null],r=t,n=!1,o=0;this._isCheckedForCombo=!0,i.forEach(function(t){null!=t&&(t.IsCheckedForCombo||t.SpriteIndex===e._index&&(s[o]=t,n=!0)),o++}),n?(s.forEach(function(t){null!=t&&(r=r.concat(t))}),s.forEach(function(t){null!=t&&t.checkForCombo(r)})):(this._scene.ComboEndedSide++,this.callComboEnd(r))},e.prototype.callComboEnd=function(t){this._scene.ComboEndedSide>0&&(this._scene.ComboEndedSide=0,t.forEach(function(t){t.IsCheckedForCombo=!1}),t.length>=3&&(this._scene.Score+=t.length,t.sort(function(t,e){return t.ID>e.ID?1:t.ID<e.ID?-1:0}),t.forEach(function(t){t.destroy()})))},e.prototype.collideWithOtherChain=function(t,e){var i=t.body.data.object,s=e.body.data.object;s.ID>i.ID&&null===s.PrevBall&&null===i.NextBall&&(s.PrevBall=i,i.NextBall=s)},e.prototype.drawID=function(){this._idtext.visible=!0,this._idtext.text=""+this.ID,this._idtext.x=this.Sprite.x,this._idtext.y=this.Sprite.y+50},e.prototype.drawLines=function(t,e){this.lineManagment(t,e),this.graphics.clear(),this.graphics.lineStyle(5,267386880,1),null!=this._prev&&this.graphics.strokeLineShape(t),this.graphics.lineStyle(5,65280,1),null!=this._next&&this.graphics.strokeLineShape(e)},e.prototype.lineManagment=function(t,e){var i,s;i=this._prev?this._prev:this,s=this._next?this._next:this,t.x1=this._sprite.x,t.y1=this._sprite.y,t.x2=i._sprite.x,t.y2=i._sprite.y-10,e.x1=this._sprite.x,e.y1=this._sprite.y,e.x2=s._sprite.x,e.y2=s._sprite.y+10},e.prototype.debugUpdate=function(){this._scene.Debug&&(this._sprite.on("pointerdown",function(t){2===t.buttons&&this.destroy()},this),this.drawLines(this.line,this.line2),this.drawID())},e.prototype.create=function(){this._sprite=this.setupSprite(),this.setupPathEnvironment(),this.setupDebugEnvironment()},e.prototype.update=function(){this._scene.IsPlaying&&this._sprite&&(this._isMover&&!this._scene.BallsAreStopped&&this.movement(),this._isDestroying&&this.destroyAnimation(this._sprite.scaleX),this.ballsBehaviour(),this.debugUpdate())},e.prototype.ballsBehaviour=function(){null===this._next||null===this._prev?(this._scene.Debug&&this._sprite.setTint(7434609),this.overlapCollider=this._scene.physics.overlap(this._sprite,this._scene.BallsPhysicsGroup,this.collideWithOtherChain.bind(this))):null!==this.overlapCollider&&(this._scene.Debug&&this._sprite.setTint(16777215),this._scene.physics.world.removeCollider(this.overlapCollider)),this._next&&this._id<this._next.ID&&this._prev===this._next&&(this._prev=null,this._next.NextBall=null),this._prev&&this._id>this._prev.ID&&this._prev===this._next&&(this._next=null,this._prev.PrevBall=null)},e}(Phaser.GameObjects.GameObject);e.Ball=r},502:function(t,e,i){t.exports=i(503)},503:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(237);var s=i(1386),r=i(1390),n={type:Phaser.AUTO,resolution:1,backgroundColor:"#EDEEC9",scene:[r.default,s.default],scale:{parent:"content",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:480,height:900},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}}};new Phaser.Game(n)}},[502]);