webpackJsonp([0],{1387:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=n(1388),_=n(1391),f=n(1396),d=n(1398),y=function(e){function t(){var e;return s(this,t),e=o(this,c(t).call(this,{key:"MainScene"})),e._debug=!1,e._ballsInComboArray=[],e.Music=null===localStorage.getItem("Music")?0:parseInt(localStorage.getItem("Music")),e.Sound=null===localStorage.getItem("Sound")?0:parseInt(localStorage.getItem("Sound")),e.MusTrack=null,e.ComboEndedSide=0,e.GameSpriteScale=1.5,e.BallsAreStopped=!1,e._roomManager=null,e._objManager=null,e._scoreManager=null,e._menuUI=null,e}return l(t,e),a(t,[{key:"XYtoVector2",value:function(e,t){return new Phaser.Math.Vector2(e,t)}},{key:"inWorldBounds",value:function(e){return e.x>-64*this.GameSpriteScale&&e.x<544*this.GameSpriteScale&&e.y>-64*this.GameSpriteScale&&e.y<964*this.GameSpriteScale}},{key:"computeBallRealPosition",value:function(e,t,n){var i=this._objManager.PathObject.PathPoints,s=e>=0&&e<i.length?i[e]:i[0],r=s;return t>=0&&(r=t>=i.length?i[i.length-1]:i[t]),new Phaser.Math.Vector2(Phaser.Math.Interpolation.Linear([s.x,r.x],n),Phaser.Math.Interpolation.Linear([s.y,r.y],n))}},{key:"setupGroups",value:function(){this.PlayerBallPhysicsGroup=this.physics.add.group(),this.EndOfPathPhysicsGroup=this.physics.add.group(),this.BallsPhysicsGroup=this.physics.add.group(),this.CoinsPhysicsGroup=this.physics.add.group(),this.UpdateGroup=this.add.group(),this.UpdateGroup.runChildUpdate=!0}},{key:"setupGameRules",value:function(){this.game.canvas.oncontextmenu=function(e){return e.preventDefault()},this.physics.world.setBounds(29*this.GameSpriteScale,97*this.GameSpriteScale,421*this.GameSpriteScale,745*this.GameSpriteScale,!0,!0,!0,!0),this.cameras.main.setBounds(0,0,480*this.GameSpriteScale,900*this.GameSpriteScale)}},{key:"setupManagers",value:function(){this._roomManager=new p.RoomManager(this),this._objManager=new _.ObjMapManager(this),this._scoreManager=new f.ScoreManager(this),this._menuUI=new d.MenuUI(this),this._roomManager.setupManagers(),this._objManager.setupManagers(),this._scoreManager.setupManagers(),this._menuUI.setupManagers()}},{key:"setupGameEnvironment",value:function(){this.add.sprite(240*this.GameSpriteScale,470*this.GameSpriteScale,"Board").setScale(.8*this.GameSpriteScale,.8*this.GameSpriteScale).setOrigin(.5).setTint(2631720).depth=10,this.setupGroups(),this.setupGameRules(),this.setupManagers(),this._cursors=this.input.keyboard.createCursorKeys(),this._editorKey=this.input.keyboard.addKey("E")}},{key:"create",value:function(){this.Music=null===localStorage.getItem("Music")?0:parseInt(localStorage.getItem("Music")),this.Sound=null===localStorage.getItem("Sound")?0:parseInt(localStorage.getItem("Sound")),this.setupGameEnvironment(),this._roomManager.loadMenu()}},{key:"update",value:function(){Phaser.Input.Keyboard.JustDown(this._editorKey)&&this._roomManager.loadEditor(),this._roomManager.IsPlaying&&this._objManager.correctBallIDs()}},{key:"Debug",get:function(){return this._debug}},{key:"BallsInComboArray",get:function(){return this._ballsInComboArray},set:function(e){this._ballsInComboArray=e}},{key:"RoomManager",get:function(){return this._roomManager}},{key:"ObjManager",get:function(){return this._objManager}},{key:"ScoreManager",get:function(){return this._scoreManager}},{key:"MenuUI",get:function(){return this._menuUI}}]),t}(Phaser.Scene);t.default=y},1388:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=n(1389),_=n(1390),f=n(152),d=function(e){function t(e){var n;return s(this,t),n=o(this,u(t).call(this,e,"")),n._gameBackground=null,n.Room=-1,n._constBallsNumber=10,n._ballsNumber=n._constBallsNumber,n._constBallSpeed=.015,n._preDefinedBallSpeed=n._constBallSpeed,n._ballSpeed=n._preDefinedBallSpeed,n._levelNumber=2,n._isPlaying=!1,n._isGameOver=!1,n._scene=e,n._scene.UpdateGroup.add(c(n)),n.create(),n}return l(t,e),a(t,[{key:"setupBackground",value:function(){this._gameBackground=this._scene.add.sprite(200*this._scene.GameSpriteScale,0,"Background_"+String(Phaser.Math.Between(1,5))).setScale(.3*this._scene.GameSpriteScale).setOrigin(.5,0),this._gameBackground.depth=0}},{key:"setupStartLevelValues",value:function(){this._levelNumber=1,this._isGameOver=!1,this._SM.Score=0,this._SM.Coins=0,this._preDefinedBallSpeed=this._constBallSpeed,this._ballsNumber=this._constBallsNumber,this._ballSpeed=.75}},{key:"setupManagers",value:function(){this._OM=this._scene.ObjManager,this._MU=this._scene.MenuUI,this._SM=this._scene.ScoreManager}},{key:"changeBackground",value:function(){this._gameBackground.setTexture("Background_"+String(Phaser.Math.Between(1,5)))}},{key:"controlBallSpeed",value:function(){this.Room==f.RoomsEnum.Game&&(this.IsGameOver?this._ballSpeed=.3:this._ballSpeed>this._preDefinedBallSpeed&&(this._ballSpeed+=.04*(this._preDefinedBallSpeed-this._ballSpeed)))}},{key:"updateBallInfo",value:function(){this._preDefinedBallSpeed+=.005,this._ballSpeed=.75,this._ballsNumber+=10}},{key:"loadMenu",value:function(){this.Room!=f.RoomsEnum.Menu&&(this.Room=f.RoomsEnum.Menu,this._isPlaying=!1,this._SM.Score=0,this._MU.setVisibleMenuUI(!0))}},{key:"loadGame",value:function(e){this.Room!=f.RoomsEnum.Game&&(this.Room=f.RoomsEnum.Game,this._isPlaying=!0,this.setupStartLevelValues(),this._OM.loadLevel(),this._OM.clearBallsAndCoins(),this._OM.createBalls(),this._OM.createCoin(),this._MU.setVisibleMenuUI(!1),this._scene.MusTrack=this._scene.Music?this._scene.sound.add("Track1"):null,!this._scene.MusTrack||this._scene.MusTrack.play(),!this._scene.MusTrack||this._scene.MusTrack.setLoop(!0),!e||this.changeBackground())}},{key:"loadShop",value:function(){this.Room!=f.RoomsEnum.Shop&&(this.Room=f.RoomsEnum.Shop,new _.ShopManager(this._scene))}},{key:"unLoadShop",value:function(){this.Room!=f.RoomsEnum.Menu&&this.loadMenu()}},{key:"loadGameOver",value:function(){this.Room!=f.RoomsEnum.GameOver&&(this.Room=f.RoomsEnum.GameOver,this._isPlaying=!1,this._OM.PlayerObject.destroy(),this._MU.setVisibleMenuUI(!0),this._SM.recordScoreAndCoins(),!this._scene.MusTrack||this._scene.MusTrack.stop())}},{key:"loadEditor",value:function(){this.Room!=f.RoomsEnum.Editor&&(this.Room=f.RoomsEnum.Editor,this._OM.clearBallsAndCoins(),this._OM.clearLevel(),this._MU.setVisibleMenuUI(!1),new p.EditorManager(this._scene,this._OM.PathObject))}},{key:"loadNewLevel",value:function(e){this._levelNumber==e&&(this._levelNumber<10?this._levelNumber+=1:this._levelNumber=1,this._SM.Coins+=10,this.changeBackground(),this.updateBallInfo(),this._OM.loadLevel(),this._OM.clearBallsAndCoins(),this._OM.createCoin(),this._OM.createBalls())}},{key:"create",value:function(){this.setupBackground()}},{key:"update",value:function(){this.controlBallSpeed()}},{key:"BallsNumber",get:function(){return this._ballsNumber},set:function(e){this._ballsNumber=e}},{key:"BallSpeed",get:function(){return this._ballSpeed},set:function(e){this._ballSpeed=e}},{key:"LevelNumber",get:function(){return this._levelNumber}},{key:"IsPlaying",get:function(){return this._isPlaying}},{key:"IsGameOver",get:function(){return this._isGameOver},set:function(e){this._isGameOver=e}}]),t}(Phaser.GameObjects.GameObject);t.RoomManager=d},1389:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=function(e){function t(e,n){var i;return s(this,t),i=o(this,u(t).call(this,e,"")),i._type="Curves",i._playerSpawn=null,i._curves=[],i._graphicsArray=[],i._coinZones=[],i._coinGraphicsArray=[],i._scene=e,i._path=n,i._RM=e.RoomManager,i._OM=e.ObjManager,i._SM=e.ScoreManager,i._MU=e.MenuUI,i._scene.UpdateGroup.add(c(i)),i.create(),i}return l(t,e),a(t,[{key:"setupUI",value:function(){this._buttons={save:this.setupButton("Save",90,850),plus:this.setupButton("Plus",190,850),minus:this.setupButton("Minus",290,850),curve:this.setupButton("Curve",390,850)}}},{key:"setupButton",value:function(e,t,n){var i=this._scene.add.image(t,n,e).setScale(1*this._scene.GameSpriteScale).setOrigin(.5);return i.depth=15,i.setInteractive(),i.on("pointerdown",function(e){if(1===e.buttons)switch(i.texture.key){case"Save":this.saveLevel();break;case"Plus":"Curves"==this._type?this.addCurveTools():"Coins"==this._type?this.addCoinTools():"Player"==this._type&&(null!=this._playerSpawn&&this.deletePlayerSpawnPoint(),this._playerSpawn=this.createPlayerSpawnPoint());break;case"Minus":"Curves"==this._type?this.deleteCurveTools():"Coins"==this._type?this.deleteCoinTools():"Player"==this._type&&this.deletePlayerSpawnPoint();break;case"Curve":this._type="Coins",i.setTexture("EditorCoin"),i.setScale(.5*this._scene.GameSpriteScale),this._coinZones.forEach(function(e){for(var t=0;t<2;t++)e[t].visible=!0}),this._curves.forEach(function(e){for(var t=0;t<4;t++)e[t].visible=!1});break;case"EditorCoin":this._type="Player",i.setTexture("EditorCube"),i.setScale(.6*this._scene.GameSpriteScale),this._coinZones.forEach(function(e){for(var t=0;t<2;t++)e[t].visible=!1});break;case"EditorCube":this._type="Curves",i.setTexture("Curve"),i.setScale(1*this._scene.GameSpriteScale),this._curves.forEach(function(e){for(var t=0;t<4;t++)e[t].visible=!0})}},this),i}},{key:"createBezierTools",value:function(e){for(var t=["0x00ff00","0x008800","0x888888","0xffffff"],n=[],i=0;i<4;i++)if(null!=e&&0==i)n[i]=e[3];else{var s=this.addNewBezierPoint(t,i);n[i]=s}for(var r=this._path.createBezierCurve(n[0],n[1],n[2],n[3]),a=this._path.addNewGraphics(),i=0;i<4;i++)n[i].data=null!=e&&0==i?{curve:r,graphics:a,prevCurve:e[3].data.curve,prevGraphics:e[3].data.graphics}:{curve:r,graphics:a,prevCurve:null,prevGraphics:null};return this._path.drawBezierCurve(r,a),this.setupBezierDrag(n),n}},{key:"addCurveTools",value:function(){this._curves[this._curves.length]=this.createBezierTools(this._curves[this._curves.length-1])}},{key:"deleteCurveTools",value:function(){var e=this._curves[this._curves.length-1];this._path.deleteBezierCurve(e,e[0].data.graphics),this._curves.pop(),this._path._curvesNumber--}},{key:"addNewBezierPoint",value:function(e,t){var n=this._curves[this._curves.length-1]?this._curves[this._curves.length-1]:null,i=null==n?new Phaser.Math.Vector2(100,100):new Phaser.Math.Vector2(n[3].x,n[3].y),s=this._scene.add.image(i.x,i.y,"EditorDragPoint").setScale(.05*this._scene.GameSpriteScale).setOrigin(.5);return s.alpha=.8,s.depth=15,s.setTint(e[t]),s.setInteractive(),s}},{key:"setupBezierDrag",value:function(e){this._scene.input.on("pointerdown",function(t,n){"Curves"==this._type?this._scene.input.setDraggable(e,!0):this._scene.input.setDraggable(e,!1)},this),this._scene.input.on("drag",function(e,t,n,i){"Curves"==this._type&&(t.x=n,t.y=i,this._path.drawBezierCurve(t.data.curve,t.data.graphics),null!=t.data.prevCurve&&this._path.drawBezierCurve(t.data.prevCurve,t.data.prevGraphics))},this)}},{key:"createPlayerSpawnPoint",value:function(){var e=this._scene.add.image(100,100,"Player_Circle").setScale(.15*this._scene.GameSpriteScale).setOrigin(.5);return e.depth=15,e.setInteractive({draggable:!0}),e.on("drag",function(t,n,i){1===t.buttons&&"Player"==this._type&&(e.x=n,e.y=i)},this),e}},{key:"deletePlayerSpawnPoint",value:function(){this._playerSpawn.destroy()}},{key:"addNewGraphics",value:function(){var e=this._scene.add.graphics();return e.depth=1,e.alpha=.2,e.clear(),this._coinGraphicsArray.push(e),e}},{key:"createCoinTools",value:function(){for(var e=["0x00ff00","0x008800","0x888888","0xffffff"],t=[],n=0;n<2;n++){var i=this.addNewCoinPoint(e,n);t[n]=i}for(var s=this.createCoinZone(t[0],t[1]),r=this.addNewGraphics(),a=0;a<2;a++)t[a].data={rect:s,graphics:r};return this.drawCoinRect(s,r),this.setupCoinDrag(t),t}},{key:"addCoinTools",value:function(){var e=this._coinZones.length;this._coinZones[e]=this.createCoinTools()}},{key:"deleteCoinTools",value:function(){var e=this._coinZones[this._coinZones.length-1];this._path.deleteCoinZone(e,e[0].data.graphics),this._coinZones.pop()}},{key:"addNewCoinPoint",value:function(e,t){var n=this._scene.add.image(100,100,"Ball_3_a").setScale(.05*this._scene.GameSpriteScale).setOrigin(.5);return n.alpha=.5,n.depth=15,n.setTint(e[t]),n.setInteractive(),n}},{key:"setupCoinDrag",value:function(e){this._scene.input.on("pointerdown",function(t,n){"Coins"==this._type?this._scene.input.setDraggable(e,!0):this._scene.input.setDraggable(e,!1)},this),this._scene.input.on("drag",function(t,n,i,s){"Coins"==this._type&&(n.x=i,n.y=s,e.forEach(function(t){t.data.rect=Phaser.Geom.Rectangle.FromPoints(e,t.data.rect)}),this.drawCoinRect(n.data.rect,n.data.graphics))},this)}},{key:"createCoinZone",value:function(e,t){var n,i=[new Phaser.Math.Vector2(e.x,e.y),new Phaser.Math.Vector2(t.x,t.y)];return n=Phaser.Geom.Rectangle.FromPoints(i,n),this._coinZones.push(n),n}},{key:"deleteCoinZone",value:function(e,t){for(var n=0;n<e.length;n++)e[n].visible=0,e[n].destroy();t.clear(),this._coinGraphicsArray.pop()}},{key:"drawCoinRect",value:function(e,t){t.clear(),t.fillStyle(16711680,1),t.fillRectShape(e)}},{key:"saveLevel",value:function(){for(var e,t=[],n=[],i=0;i<this._path.CurvesArray.length;i++)for(var s=0;s<4;s++){var r=void 0;r=this._scene.XYtoVector2(this._path.CurvesArray[i][s].x,this._path.CurvesArray[i][s].y),t[4*i+s]=r}for(var a=0;a<this._coinZones.length;a++)for(var o=0;o<2;o++){var u=void 0;u=this._scene.XYtoVector2(this._coinZones[a][o].x,this._coinZones[a][o].y),n[2*a+o]=u}e={curves:this._path.CurvesArray.length,curvesArray:t,coinZones:this._coinZones.length,coinZonesArray:n,playerSpawn:new Phaser.Math.Vector2(this._playerSpawn.x,this._playerSpawn.y)},localStorage.setItem("level",JSON.stringify(e)),console.log(localStorage.getItem("level"))}},{key:"editorManagment",value:function(){Phaser.Input.Keyboard.JustDown(this._scene._cursors.space)&&(!this._path.EndOfPathSprite||this._path.EndOfPathSprite.destroy(),this._path.PathPoints=this._path.createPointsFromCurvesArray(this._path.CurvesArray,!0),this._OM.clearBallsAndCoins(),this._OM.createBalls()),Phaser.Input.Keyboard.JustDown(this._scene._cursors.up)&&(this._RM.BallSpeed+=.025),Phaser.Input.Keyboard.JustDown(this._scene._cursors.down)&&(this._RM.BallSpeed=.015),Phaser.Input.Keyboard.JustDown(this._scene._cursors.left)&&(this._background.visible=!1),Phaser.Input.Keyboard.JustDown(this._scene._cursors.right)&&(this._background.visible=!0)}},{key:"create",value:function(){this.setupUI();var e=Phaser.Math.Between(1,10);console.log("BACK"+e),this._background=this._scene.add.sprite(20,0,"LevelBack_"+String(e)).setOrigin(0,0),this._background.depth=0,this._curves=this._path.CurvesArray,this._graphicsArray=this._path.GraphicsArray}},{key:"update",value:function(){this.editorManagment()}}]),t}(Phaser.GameObjects.GameObject);t.EditorManager=p},1390:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=function(e){function t(e){var n;return s(this,t),n=o(this,u(t).call(this,e,"")),n._unlock=n.loadSkins(),n._styleText={font:"35px Orbitron-Bold",fill:"#f9e83b"},n._scene=e,n._RM=e.RoomManager,n._OM=e.ObjManager,n._SM=e.ScoreManager,n._MU=e.MenuUI,n._scene.UpdateGroup.add(c(n)),n.create(),n}return l(t,e),a(t,[{key:"setupUI",value:function(){return{background:this.setupBackground(),exit:this.setupButton("Exit",40,40),coins:this.setupCoins(),skins:this.setupSkins(),shop:this.setupText(240,110,24,38,"SHOP")}}},{key:"setupBackground",value:function(){var e=[];return e[0]=this.setupSprite(240,450,"ShopBackground",20,!1,1),e[1]=this.setupSprite(239,77,"ShopTop",23,!1,1),e}},{key:"setupCoins",value:function(){var e,t,n={sprite:null,text:null};return e=this.setupSprite(446,33,"Coin",24,!1,.18),e.depth=24,t=this.setupText(386,33,24,38,String(this._SM.AllCoins)),n.sprite=e,n.text=t,n}},{key:"setupText",value:function(e,t,n,i,s){var r;return r=this._scene.add.text(e*this._scene.GameSpriteScale,t*this._scene.GameSpriteScale,s,this._styleText),r.depth=n,r.setFontSize(i*this._scene.GameSpriteScale),r.setOrigin(.5),r}},{key:"setupSprite",value:function(e,t,n,i,s,r,a,o){var u;return a=a||r,u=this._scene.add.image(e*this._scene.GameSpriteScale,t*this._scene.GameSpriteScale,n).setScale(r*this._scene.GameSpriteScale,a*this._scene.GameSpriteScale).setOrigin(.5).setTint(o),u.depth=i,!s||u.setInteractive(),u}},{key:"setupButton",value:function(e,t,n){var i=this.setupSprite(t,n,e,24,!0,1);return i.on("pointerdown",function(e){1===e.buttons&&(!this._scene.Sound||this._scene.sound.play("Button"),this.destroy())},this),i}},{key:"setupSkins",value:function(){var e=this,t=[],n=this.setupSprite(140,259,"RoundedRectangle",20,!0,1.2,1.2,2681205);n.setData("key","WinSel");for(var i=0;i<3;i++){for(var s=0;s<2;s++)!function(n){var s=[],r=[],a=[new Phaser.Math.Vector2(99,224),new Phaser.Math.Vector2(142,287),new Phaser.Math.Vector2(184,224)],o=200*n,u=231*i,c=2*i+n,l=150*c,h=e.setupSprite(140+o,259+u,"RoundedRectangle",21,!0,1.15,1.15,2039583);h.setData("id",c),h.setInteractive();var p=e.setupSprite(140+o,259+u,"RoundedRectangle",22,!0,1.15,1.15,0);p.alpha=.8*(1-e._unlock[c]),p.setData("id",c),p.setData("price",l);var _=e.setupText(125+o,259+u,23,24,l);_.alpha=1-e._unlock[c];var f=e.setupSprite(170+o,259+u,"Coin",23,!1,.15);f.alpha=1*(1-e._unlock[c]),f.depth=23;var d=e.setupSprite(210+o,325+u,"LockIcon",23,!1,.15);d.alpha=1*(1-e._unlock[c]),h.on("pointerdown",function(e){if(1===e.buttons){var t=h.getData("id");this._unlock[t]&&(this.updateSelected(t,3),this._OM.BallType=t+1)}},e),p.on("pointerdown",function(e){if(1===e.buttons){var t=p.getData("id");this._unlock[t]||this._SM.AllCoins>p.getData("price")&&(this._scene.add.tween({targets:[p,_,f,d],ease:"Quad",duration:500,delay:0,angle:0,alpha:0}),this._unlock[t]=1,this._ui.coins.txt=this._SM.setNewAllCoins(-p.getData("price")),localStorage.setItem("SkinUnlock"+t,"1"))}},e);for(var y=0;y<3;y++){var m=String.fromCharCode(97+y),v="Ball_"+String(c+1)+"_"+String(m);r[y]=e.setupSprite(a[y].x+o,a[y].y+u,v,21,!1,.2)}s.push(h),s.push(p),s.push(_),s.push(f),s.push(d),r.forEach(function(e){s.push(e)}),t[c]=s}(s);t[6]=[n]}return t}},{key:"loadSkins",value:function(){for(var e=[],t=0;t<6;t++){var n=parseInt(localStorage.getItem("SkinUnlock"+t));e[t]=n||0}return e}},{key:"updateSelected",value:function(e,t){var n=this,i=Math.floor(e/t),s=e-i*t,r=200*s,a=231*i;this._ui.skins.forEach(function(e){e.forEach(function(e){"WinSel"==e.getData("key")&&(e.x=(140+r)*n._scene.GameSpriteScale,e.y=(259+a)*n._scene.GameSpriteScale)})})}},{key:"destroy",value:function(){this._ui.background.forEach(function(e){e.destroy()}),this._ui.skins.forEach(function(e){e.forEach(function(e){e.destroy()})}),this._ui.shop.destroy(),this._ui.exit.destroy(),this._ui.coins.sprite.destroy(),this._ui.coins.text.destroy(),this._RM.unLoadShop(),this.active=!1}},{key:"create",value:function(){this._ui=this.setupUI(),this.updateSelected(this._OM.BallType-1,3)}},{key:"update",value:function(){}}]),t}(Phaser.GameObjects.GameObject);t.ShopManager=p},1391:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=n(1392),_=n(502),f=n(1393),d=n(1394),y=function(e){function t(e){var n;return s(this,t),n=o(this,u(t).call(this,e,"")),n._ballArray=[],n._ballArrayLength=0,n._ballArrayPosition=0,n._ballType=1,n._pathSprites=[],n._playerObject=null,n._coinZones=[],n._scene=e,n._scene.UpdateGroup.add(c(n)),n.create(),n}return l(t,e),a(t,[{key:"setupManagers",value:function(){this._MU=this._scene.ObjManager,this._RM=this._scene.RoomManager,this._SM=this._scene.ScoreManager}},{key:"correctBallIDs",value:function(){var e=this._ballArray,t=[],n=0;e.forEach(function(e){null!=e&&void 0!=e&&t.push(e)}),t.sort(function(e,t){var n=e.TweenStart-t.TweenStart;return 0!=n||(n=e.TweenValue-t.TweenValue),n}),t.forEach(function(e){e.ID=n,e.IsMover=0==n,n++})}},{key:"createCoin",value:function(){var e=new Phaser.Geom.Point(0,0),t=this._coinZones[Phaser.Math.Between(0,this._coinZones.length-1)];e=Phaser.Geom.Rectangle.Random(t,e),this._coinObject=new f.Coin(this._scene,e.x,e.y)}},{key:"createBalls",value:function(){var e=this._RM.BallsNumber;this._ballArrayPosition=0;for(var t=e-1;t>=0;t--)this._ballArray[t]=new _.Ball(this._scene,this._ballType,Phaser.Math.Between(0,2)),this._ballArray[t].ID=t,this._ballArray[t].CountID=t,this._ballArray[t].TweenStart=32*(t-e),this._ballArray[t].TweenStart>=0?this._ballArray[t].TweenPosition=this._path.PathPoints[this._ballArray[t].TweenStart]:this._ballArray[t].TweenPosition=this._path.PathPoints[0],this._ballArrayPosition++;for(var n=0;n<e;n++)this._ballArray[n].PrevBall=this._ballArray[n-1],this._ballArray[n].NextBall=this._ballArray[n+1];this._ballArray[0]._isMover=!0,this._ballArray[0].PrevBall=null,this._ballArray[e-1].NextBall=null,this.countBalls()}},{key:"countBalls",value:function(){var e=0;this._ballArray.forEach(function(t){null!==t&&e++}),this._ballArrayLength=e,0===this._ballArrayLength&&this._RM.IsPlaying&&(this._RM.IsGameOver?this._RM.loadGameOver():this._RM.loadNewLevel(this._RM.LevelNumber))}},{key:"clearBallsAndCoins",value:function(){this._ballArray.forEach(function(e){null!=e&&e.destroy()}),this._ballArray=[],this._ballArrayLength=0,!this._coinObject||this._coinObject.destroy()}},{key:"loadLevel",value:function(){var e=this._scene.cache.json.get("Level"+this._RM.LevelNumber),t=JSON.parse(JSON.stringify(e.curvesArray)),n=JSON.parse(JSON.stringify(e.coinZonesArray));this.clearLevel();for(var i=0;i<e.curves;i++){for(var s=[],r=0;r<4;r++)s.push(t[4*i+r]),s[r].x*=this._scene.GameSpriteScale,s[r].y*=this._scene.GameSpriteScale;var a=this._path.addNewGraphics();this._path.CurvesArray[i]=this._path.createBezierCurve(s[0],s[1],s[2],s[3]),this._path.drawBezierCurve(this._path.CurvesArray[i],a)}this._path.PathPoints=this._path.createPointsFromCurvesArray(this._path.CurvesArray,!1),this._path.PathSprite=this._path.createSpriteFromCurveArray(this._path.GraphicsArray,this._RM.LevelNumber);for(var o=0;o<e.coinZones;o++){for(var u=[],c=0;c<2;c++)u.push(n[2*o+c]),u[c].x*=this._scene.GameSpriteScale,u[c].y*=this._scene.GameSpriteScale;this._coinZones[o]=Phaser.Geom.Rectangle.FromPoints(u,this._coinZones[o])}this._playerObject?this._playerObject.setPos(e.playerSpawn):this._playerObject=new d.Player(this._scene,this._ballType,e.playerSpawn.x*this._scene.GameSpriteScale,e.playerSpawn.y*this._scene.GameSpriteScale)}},{key:"clearLevel",value:function(){return!this._path||this._path.destroy(),this._path=new p.Path(this._scene),this._path}},{key:"create",value:function(){}},{key:"update",value:function(){}},{key:"BallArray",get:function(){return this._ballArray}},{key:"BallArrayLength",get:function(){return this._ballArrayLength}},{key:"BallArrayPosition",get:function(){return this._ballArrayPosition},set:function(e){this._ballArrayPosition=e}},{key:"BallType",get:function(){return this._ballType},set:function(e){this._ballType=e}},{key:"PathObject",get:function(){return this._path}},{key:"PathSprites",get:function(){return this._pathSprites}},{key:"PlayerObject",get:function(){return this._playerObject},set:function(e){this._playerObject=e}}]),t}(Phaser.GameObjects.GameObject);t.ObjMapManager=y},1392:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=function(e){function t(e){var n;return s(this,t),n=o(this,u(t).call(this,e,"")),n._pathPoints=[],n._curves=[],n._graphicsArray=[],n._curvesNumber=0,n._levelNumber=1,n._scene=e,n._scene.UpdateGroup.add(c(n)),n.create(),n}return l(t,e),a(t,[{key:"addNewGraphics",value:function(){var e=this._scene.add.graphics();return e.depth=1,e.alpha=.8,e.clear(),this._graphicsArray.push(e),e}},{key:"createBezierCurve",value:function(e,t,n,i){var s=new Phaser.Curves.CubicBezier(e,t,n,i);return this._curves[this._curvesNumber++]=s,s}},{key:"drawBezierCurve",value:function(e,t){t.clear(),t.lineStyle(40*this._scene.GameSpriteScale,0),e.draw(t),e.defaultDivisions=5,e.arcLengthDivisions=5}},{key:"deleteBezierCurve",value:function(e,t){var n;n=1==this._curvesNumber?0:1;for(var i=n;i<e.length;i++)e[i].visible=0;t.clear(),this._graphicsArray.pop()}},{key:"createSpriteFromCurveArray",value:function(e,t){var n;return this._levelNumber=t,e.forEach(function(e){e.generateTexture("Path"+String(t)),e.destroy()}),n=this._scene.add.image(240*this._scene.GameSpriteScale,450*this._scene.GameSpriteScale,"Path"+String(t)),n.alpha=.25,n}},{key:"createPointsFromCurvesArray",value:function(e,t){var n,i=[];return e.forEach(function(e){i=!0===t?i.concat(e[0].data.curve.getDistancePoints(1)):i.concat(e.getDistancePoints(1))}),n=i[i.length-16],this._endOfPathSprite=this._scene.add.image(n.x,n.y,"Player_Circle").setScale(.15*this._scene.GameSpriteScale).setOrigin(.5),this.setupPhysics(this._endOfPathSprite,.5*this._endOfPathSprite.width),i}},{key:"setupPhysics",value:function(e,t){this._scene.EndOfPathPhysicsGroup.add(e),e.body.setCircle(t)}},{key:"destroy",value:function(){!this._endOfPathSprite||this._endOfPathSprite.destroy(),!this._scene.textures.get("Path"+String(this._levelNumber))||this._scene.textures.remove("Path"+String(this._levelNumber)),!this._pathSprite||this._pathSprite.destroy(),this.active=!1}},{key:"create",value:function(){}},{key:"update",value:function(){}},{key:"EndOfPathSprite",get:function(){return this._endOfPathSprite}},{key:"Path",get:function(){return this._path}},{key:"PathPoints",get:function(){return this._pathPoints},set:function(e){this._pathPoints=e}},{key:"PathSprite",get:function(){return this._pathSprite},set:function(e){this._pathSprite=e}},{key:"CurvesArray",get:function(){return this._curves},set:function(e){this._curves=e}},{key:"GraphicsArray",get:function(){return this._graphicsArray}},{key:"CurvesNumber",get:function(){return this._curvesNumber}}]),t}(Phaser.GameObjects.GameObject);t.Path=p},1393:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=function(e){function t(e,n,i){var r;return s(this,t),r=o(this,u(t).call(this,e,"")),r._isActive=!0,r._isDestroyed=!1,r._scale=0,r._scene=e,r._x=n,r._y=i,r._RM=e.RoomManager,r._OM=e.ObjManager,r._SM=e.ScoreManager,r._MU=e.MenuUI,r._scene.UpdateGroup.add(c(r)),r.create(),r}return l(t,e),a(t,[{key:"defineManagers",value:function(){this._RM=this._scene.RoomManager,this._OM=this._scene.ObjManager,this._SM=this._scene.ScoreManager,this._MU=this._scene.MenuUI}},{key:"setupSprite",value:function(){var e=this._scene.physics.add.image(this._x,this._y,"Coin").setScale(this._scale*this._scene.GameSpriteScale).setOrigin(.5);return e.depth=5,e.alpha=0,e.angle=180,this.setupPhysics(e),e}},{key:"setupPhysics",value:function(e){this._scene.physics.world.enableBody(e),this._scene.CoinsPhysicsGroup.add(e),e.body.setCircle(.5*e.width,0,0)}},{key:"destroy",value:function(e){this._isDestroyed||(e&&this._OM.createCoin(),this._isDestroyed=!0,this._sprite.destroy())}},{key:"collideWithBall",value:function(){!this._scene.Sound||this._scene.sound.play("Coin"),this._isActive&&(this._SM.Coins++,this._isActive=!1),this.animationManagment(.5,0,150,!0)}},{key:"animationManagment",value:function(e,t,n,i){var s=this;this._scene.add.tween({targets:[this._sprite],ease:"Quad",duration:n,delay:0,scaleX:e*this._scene.GameSpriteScale,scaleY:e*this._scene.GameSpriteScale,angle:0,alpha:t,onComplete:function(){!i||s.destroy(!0)}})}},{key:"create",value:function(){this._sprite=this.setupSprite(),this._scene.physics.add.overlap(this._sprite,this._scene.PlayerBallPhysicsGroup,this.collideWithBall.bind(this)),this.defineManagers(),this.animationManagment(.2,1,750,!1)}},{key:"update",value:function(){this._RM.IsGameOver&&this.animationManagment(.5,0,150,!0)}},{key:"Sprite",get:function(){return this._sprite}},{key:"IsActive",get:function(){return this._isActive}},{key:"IsDestroyed",get:function(){return this._isDestroyed}},{key:"X",get:function(){return this._x}},{key:"Y",get:function(){return this._y}}]),t}(Phaser.GameObjects.GameObject);t.Coin=p},1394:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=n(1395),_=n(152),f=function(e){function t(e,n,i,r){var a;return s(this,t),a=o(this,u(t).call(this,e,"")),a._graphics=[],a._ball=null,a._isDestroyed=!1,a._scene=e,a._type=n,a._x=i,a._y=r,a._RM=e.RoomManager,a._OM=e.ObjManager,a._SM=e.ScoreManager,a._MU=e.MenuUI,a._scene.UpdateGroup.add(c(a)),a.create(),a}return l(t,e),a(t,[{key:"defineManagers",value:function(){this._RM=this._scene.RoomManager,this._OM=this._scene.ObjManager,this._SM=this._scene.ScoreManager,this._MU=this._scene.MenuUI}},{key:"setupParticles",value:function(){var e=this._scene.add.particles("CannonShape",new Function("return "+this._scene.cache.text.get("CannonEffect"))());e.active=!0,e.depth=4,this._particlesEmitter=e}},{key:"setupSprite",value:function(e,t){var n=this._scene.physics.add.image(this._x,this._y,e).setScale(.15*this._scene.GameSpriteScale).setOrigin(.5,.55);return n.depth=t,n}},{key:"setPos",value:function(e){this._x=e.x*this._scene.GameSpriteScale,this._y=e.y*this._scene.GameSpriteScale,this._sprite.x=this._x,this._sprite.y=this._y,this._spriteBack.x=this._x,this._spriteBack.y=this._y,this._ball&&(this._ball.Sprite.x=this._x,this._ball.Sprite.y=this._y)}},{key:"destroy",value:function(){this._OM.PlayerObject=null,this._isDestroyed=!0,!this._ball||this._ball.destroy(!1),this._graphics.forEach(function(e){e.clear()}),this._sprite.destroy(),this._spriteBack.destroy()}},{key:"calculatePointerAngle",value:function(){var e=this._scene.input.activePointer,t=Phaser.Math.Angle.Between(this._x,this._y,e.x+this._scene.cameras.main.scrollX,e.y+this._scene.cameras.main.scrollY);return Phaser.Math.RadToDeg(t)+90}},{key:"shootBall",value:function(e){this._ball.Sprite.angle=e,this._scene.input.on("pointerup",function(e){if(!this._isDestroyed&&this._RM.IsPlaying&&!this._RM.IsGameOver&&null!=this._ball&&this._ball.Scale>.01*this._scene.GameSpriteScale){var t=this.vectorFromAngle(Phaser.Math.DegToRad(this._ball.Sprite.angle-90),50);this._particlesEmitter.emitParticleAt(this._sprite.x+t.x,this._sprite.y+t.y,15),this._ball.shoot(Phaser.Math.DegToRad(this._ball.Sprite.angle-90)),this._ball=null}},this)}},{key:"rotateCannon",value:function(e){this.trajectoryCalculation(this._scene.input.activePointer),this._sprite.angle=e,this._spriteBack.angle=e}},{key:"createNewBall",value:function(){this._ball=null===this._ball?new p.Player_Ball(this._scene,this._type,this._x,this._y):null}},{key:"trajectoryCalculation",value:function(e){var t=null,n=!1,i=[29*this._scene.GameSpriteScale,97*this._scene.GameSpriteScale,450*this._scene.GameSpriteScale,845*this._scene.GameSpriteScale],s=Math.atan2(e.y-this.Y,e.x-this.X),r=this.vectorFromAngle(s,800*this._scene.GameSpriteScale),a=[new Phaser.Geom.Point(0,0),new Phaser.Geom.Point(0,0)],o=[new Phaser.Geom.Line(0,0,0,0),new Phaser.Geom.Line(0,0,0,0)],u=[new Phaser.Geom.Line(this.X,this.Y,this.X+r.x,this.Y+r.y),new Phaser.Geom.Line(0,0,0,0)],c=[new Phaser.Geom.Line(i[2],i[1],i[2],i[3]),new Phaser.Geom.Line(i[0],i[1],i[0],i[3]),new Phaser.Geom.Line(i[0],i[1],i[2],i[1]),new Phaser.Geom.Line(i[0],i[3],i[2],i[3])];n=this.checkForBallsIntersection(u[0],a[0]),n?n=!1:c.forEach(function(e){Phaser.Geom.Intersects.LineToLine(u[0],e,a[0])}),t=this.getBounceAngle(a[0],i,s),r=this.vectorFromAngle(t,800*this._scene.GameSpriteScale),u[1]=new Phaser.Geom.Line(a[0].x,a[0].y,a[0].x+r.x,a[0].y+r.y),c.forEach(function(e){Phaser.Geom.Intersects.LineToLine(u[1],e,a[1])}),n=this.checkForBallsIntersection(u[1],a[1]),o[0]=new Phaser.Geom.Line(this.X,this.Y,a[0].x,a[0].y),n||(a[1]=new Phaser.Geom.Point(u[1].x2,u[1].y2)),null!=t&&(o[1]=new Phaser.Geom.Line(a[0].x,a[0].y,a[1].x,a[1].y)),this.drawDottedLine(o[0],o[1],20*this._scene.GameSpriteScale,3*this._scene.GameSpriteScale)}},{key:"checkForBallsIntersection",value:function(e,t){var n=!1,i=17*this._scene.GameSpriteScale;return this._OM.BallArray.some(function(s){if(null!==s){var r=s.Sprite.x,a=s.Sprite.y,o=new Phaser.Geom.Line(r,a-i,r,a+i),u=new Phaser.Geom.Line(r-i,a,r+i,a);if(n=Phaser.Geom.Intersects.LineToLine(e,o,t))return!0;if(n=Phaser.Geom.Intersects.LineToLine(e,u,t))return!0}}),n}},{key:"getBounceAngle",value:function(e,t,n){var i=null;return e.y<t[1]+2||e.y>t[3]-2?i=Phaser.Math.DegToRad(Math.floor(360-Phaser.Math.RadToDeg(n))):(e.x<t[0]+2||e.x>t[2]-2)&&(i=Phaser.Math.DegToRad(Math.floor(180-Phaser.Math.RadToDeg(n)))),i}},{key:"vectorFromAngle",value:function(e,t){return new Phaser.Math.Vector2(Math.cos(e)*t,Math.sin(e)*t)}},{key:"drawDottedLine",value:function(e,t,n,i){var s=this,r=[[],[]],a=0;Phaser.Geom.Line.GetPoints(e,0,n,r[0]),Phaser.Geom.Line.GetPoints(t,0,n,r[1]),r.forEach(function(e){s._graphics[a].clear(),s._graphics[a].fillStyle(16777215,1),e.forEach(function(e){s._graphics[a].fillPoint(e.x,e.y,i)}),a++})}},{key:"create",value:function(){this._sprite=this.setupSprite("Player_Cannon",3),this._spriteBack=this.setupSprite("Player_CannonBack",2),this._graphics[0]=this._scene.add.graphics(),this._graphics[0].depth=1,this._graphics[1]=this._scene.add.graphics(),this._graphics[1].depth=4,this.defineManagers(),this.createNewBall(),this.setupParticles()}},{key:"update",value:function(){if(!this._isDestroyed&&this._RM.IsPlaying&&!this._RM.IsGameOver&&this._RM.Room!==_.RoomsEnum.GameOver){var e=this.calculatePointerAngle();this.rotateCannon(e),null==this._ball||this.shootBall(e)}}},{key:"SpriteBack",get:function(){return this._spriteBack}},{key:"Sprite",get:function(){return this._sprite}},{key:"ParticlesEmitter",get:function(){return this._particlesEmitter}},{key:"IsDestroyed",get:function(){return this._isDestroyed}},{key:"X",get:function(){return this._x}},{key:"Y",get:function(){return this._y}}]),t}(Phaser.GameObjects.GameObject);t.Player=f},1395:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=n(502),_=function(e){function t(e,n,i,r){var a;return s(this,t),a=o(this,u(t).call(this,e,"")),a._type=0,a._moveValue=0,a._ballsThatMoveArray=[],a._isBomb=Phaser.Math.Between(0,100)<4,a._index=Phaser.Math.Between(0,2),a._x=-1,a._y=-1,a._scale=0,a._isDestroyed=!1,a._destroyCallTries=[0,0],a._dontCollide=!1,a._nextBallObject=null,a._moveBalls=!1,a._ballSubstitution=null,a._scene=e,a._type=n,a._x=i,a._y=r,a._RM=e.RoomManager,a._OM=e.ObjManager,a._SM=e.ScoreManager,a._MU=e.MenuUI,a._scene.UpdateGroup.add(c(a)),a.create(),a}return l(t,e),a(t,[{key:"defineManagers",value:function(){this._RM=this._scene.RoomManager,this._OM=this._scene.ObjManager,this._SM=this._scene.ScoreManager,this._MU=this._scene.MenuUI}},{key:"setupSprite",value:function(){var e,t,n,i;return this._isBomb?(e=this._scene.physics.add.image(this._x,this._y,"Bomb").setScale(0).setOrigin(.5,.64),i=.4*e.height*.5):(t=String.fromCharCode(97+this._index),n="Ball_"+String(this._type)+"_"+String(t),e=this._scene.physics.add.image(this._x,this._y,String(n)).setScale(0).setOrigin(.5),i=.35*e.height*.5),e.depth=2,this.setupPhysics(e,.15*e.width,i),e}},{key:"setupPhysics",value:function(e,t,n){this._scene.PlayerBallPhysicsGroup.add(e),e.body.setCircle(t,2.5*t,2.5*n),e.body.bounce.set(1),e.body.setCollideWorldBounds(!0),e.body.onWorldBounds=!0,e.body.world.on("worldbounds",function(e){e.setCollideWorldBounds(!1)},this),e.body.data={object:this},this._scene.physics.add.overlap(e,this._scene.BallsPhysicsGroup,this.collideWithBall.bind(this))}},{key:"setupBallSubstitution",value:function(e){var t=new p.Ball(this._scene,this._type,this._index);return t.Sprite.alpha=0,t.Sprite.angle=e.Angle,t.TweenPosition=e.TweenPos,t.TweenStart=e.TweenStart,t.TweenValue=e.TweenValue,t.ID=e.ID,t.CountID=e.CountID,t.PrevBall=e.PrevBall,t.NextBall=e.NextBall,t}},{key:"setupComboCheck",value:function(e){this._scene.BallsInComboArray=[e],e.IsCheckedForCombo=!0,e.checkForCombo(!0,-1),e.checkForCombo(!1,-1)}},{key:"animationManagment",value:function(e){this._scale<e&&(this._scale+=.1*(e-this._scale),this._sprite.setScale(this._scale))}},{key:"destroy",value:function(e){this._isDestroyed||(e&&(this._scene.BallsAreStopped=!1,this._moveBalls=!1,this.setupComboCheck(this._ballSubstitution),this._OM.BallArray.forEach(function(e){null!=e&&(e.MoveForwards=!1)})),!this._OM.PlayerObject||this._OM.PlayerObject.createNewBall(),this._isDestroyed=!0,this._sprite.destroy())}},{key:"shoot",value:function(e){this._scene.physics.velocityFromRotation(e,1e3*this._scene.GameSpriteScale,this._sprite.body.velocity)}},{key:"collideWithBall",value:function(e,t){var n,i=e.body.data.object,s=t.body.data.object;if(!i.DontCollide)if(i.IsBomb)!this._scene.Sound||this._scene.sound.play("Explosion"),this._scene.BallsInComboArray=[s],s.IsCheckedForCombo=!0,s.checkForCombo(!0,1),s.checkForCombo(!1,1),i.destroy();else{var r,a,o=null,u=this._OM.BallArray,c=null,l=null,h=null,p=this._OM.PathObject.PathPoints,_=16*this._scene.GameSpriteScale,f=_+32*this._scene.GameSpriteScale,d=s.TweenStart-_>0?s.TweenStart-_:0,y=s.TweenStart-f>0?s.TweenStart-f:0,m=s.TweenStart+_<p.length?s.TweenStart+_:p.length-1,v=s.TweenStart+f<p.length?s.TweenStart+f:p.length-1,S=this._scene.computeBallRealPosition(y,d,s.TweenValue),g=this._scene.computeBallRealPosition(m,v,s.TweenValue),b=[S.x,S.y,i.Sprite.x,i.Sprite.y],w=[g.x,g.y,i.Sprite.x,i.Sprite.y],M=Phaser.Math.Distance.Between(b[0],b[1],b[2],b[3]),P=Phaser.Math.Distance.Between(w[0],w[1],w[2],w[3]);P<M?(c=s.NextBall,l=s,h=c,r=c||s,a=c?0:1):(c=s.PrevBall,l=c,h=s,r=c||s,a=c?1:0),n={Angle:this._sprite.angle,TweenPos:this._OM.PathObject.PathPoints[r.TweenStart],TweenStart:l?l.TweenStart:s.TweenStart,TweenValue:l?l.TweenValue:s.TweenValue,ID:r.ID+a,CountID:u.length,PrevBall:l,NextBall:h},o=this.setupBallSubstitution(n),u[o.CountID]=o,!l||(l.NextBall=o),!h||(h.PrevBall=o),h&&h.IsMover&&(o.IsMover=!0,h.IsMover=!1),!this._scene.Sound||this._scene.sound.play("Tick"),this._OM.BallArray[this._OM.BallArrayPosition++]=o,o.IsMover?this._scene.BallsAreStopped=!0:this.findMover(l),i.BallSubstitution=o,i.NextBallObject=h,i.MoveBalls=!0,i.DontCollide=!0}}},{key:"findMover",value:function(e){return null!==e&&(e.IsMover?(this._scene.BallsAreStopped=!0,!0):void(this.findMover(e.PrevBall)||(e.IsMover=!0,this._scene.BallsAreStopped=!0)))}},{key:"moveToBallPos",value:function(e){var t,n=this;null!=(t=e?this._scene.computeBallRealPosition(e.TweenStart,e.TweenStart+32*this._scene.GameSpriteScale,e.TweenValue):null)&&(!this._sprite.body||this._sprite.body.setVelocity(.4),this._scene.add.tween({targets:[this._sprite],ease:"Quad",duration:80,delay:0,x:t.x,y:t.y,onComplete:function(){n.tryToCallDestroy(1)}}))}},{key:"moveAllBalls",value:function(e,t,n){this._destroyCallTries[0]||(t&&(t.BallInsertAnimation=2,t.MoveForwards=!0,t.MFStep=n),e+=n,e<1?this._moveValue=e:this.lastAllBallsMove(t))}},{key:"tryToCallDestroy",value:function(e){var t;this._destroyCallTries[e]=1,(t=this._destroyCallTries[0]+this._destroyCallTries[1])>0&&(this._ballSubstitution.Sprite.alpha=1,t>1&&this.destroy(!0))}},{key:"lastAllBallsMove",value:function(e){this.tryToCallDestroy(0),!e||(e.BallInsertAnimation=0),this._OM.BallArray.forEach(function(e){null!=e&&(e.BallInsertAnimation=0)})}},{key:"create",value:function(){this._sprite=this.setupSprite(),this.defineManagers()}},{key:"update",value:function(){!this._scene.inWorldBounds(this._sprite)||this._RM.IsGameOver?this.destroy(!1):(this.animationManagment(.105*this._scene.GameSpriteScale),this._moveBalls&&(this.moveAllBalls(this._moveValue,this._ballSubstitution,.15),this.moveToBallPos(this._ballSubstitution)))}},{key:"IsBomb",get:function(){return this._isBomb}},{key:"SpriteIndex",get:function(){return this._index}},{key:"X",get:function(){return this._x}},{key:"Y",get:function(){return this._y}},{key:"Sprite",get:function(){return this._sprite}},{key:"Scale",get:function(){return this._scale}},{key:"DontCollide",get:function(){return this._dontCollide},set:function(e){this._dontCollide=e}},{key:"NextBallObject",get:function(){return this._nextBallObject},set:function(e){this._nextBallObject=e}},{key:"MoveBalls",get:function(){return this._moveBalls},set:function(e){this._moveBalls=e}},{key:"BallSubstitution",get:function(){return this._ballSubstitution},set:function(e){this._ballSubstitution=e}}]),t}(Phaser.GameObjects.GameObject);t.Player_Ball=_},1396:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=n(1397),_=function(e){function t(e){var n;return s(this,t),n=o(this,u(t).call(this,e,"")),n._bestScore=null===localStorage.getItem("Best Score")?0:localStorage.getItem("Best Score"),n._score=0,n._coins=0,n._allCoins=null===localStorage.getItem("Coins")?0:parseInt(localStorage.getItem("Coins")),n._scene=e,n._scene.UpdateGroup.add(c(n)),n.create(),n}return l(t,e),a(t,[{key:"setupManagers",value:function(){}},{key:"setNewAllCoins",value:function(e){return this._allCoins+=e,localStorage.setItem("Coins",String(this._allCoins)),this._allCoins}},{key:"recordScoreAndCoins",value:function(){p.playsiveSDK.postScore(this._score),this._score>this._bestScore&&(this._bestScore=this._score,localStorage.setItem("Best Score",String(this._score))),this.setNewAllCoins(this._coins),this._coins=0}},{key:"create",value:function(){p.playsiveSDK.gameLoaded()}},{key:"update",value:function(){}},{key:"BestScore",get:function(){return this._bestScore},set:function(e){this._bestScore=e}},{key:"Score",get:function(){return this._score},set:function(e){this._score=e}},{key:"Coins",get:function(){return this._coins},set:function(e){this._coins=e}},{key:"AllCoins",get:function(){return this._allCoins},set:function(e){this._allCoins=e}}]),t}(Phaser.GameObjects.GameObject);t.ScoreManager=_},1397:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"playsiveSDK",function(){return s});var i=function(e){this.debugMode=e,this.userInfoData=void 0,this.bestScoreData=void 0,this.savedGameData=void 0};i.prototype.logger=function(e){this.debugMode&&console.log("PlaysiveSDK Debug - "+e)},i.prototype.postToParent=function(e){void 0!=e?"object"!=typeof e?parent.postMessage(e,"*"):"object"==typeof e?parent.postMessage(JSON.stringify(e),"*"):this.logger("Error posting to parent"):this.logger("Error posting to parent")},i.prototype.gameLoaded=function(){this.postToParent("gameLoaded"),this.logger("Action Event (Game Loaded)")},i.prototype.loadingProgressUpdate=function(e){var t=e.toFixed(0),n={type:"progress",data:t};this.postToParent(n),this.logger("Action Event (Loading Progress Update: "+t+")")},i.prototype.postScore=function(e){this.postToParent(e),this.logger("Action Event (Post Score: "+e+")")},i.prototype.getUserInfo=function(){var e={type:"get_user_info",data:"playsiveSDK.onUserInfoReceived"};this.postToParent(e),this.logger("Action Event (Get user info: )")},i.prototype.saveGameData=function(e){var t=JSON.stringify(e);if(void 0!=e){var n={type:"save_game_data",data:t};this.postToParent(n)}this.logger("Action Event (Save game data: "+t+")")},i.prototype.getSavedGameData=function(){var e={type:"get_game_data",data:"playsiveSDK.onSavedGameDataReceived"};this.postToParent(e),this.logger("Action Event (Get game data)")},i.prototype.getBestScore=function(){var e={type:"get_best_score",data:"playsiveSDK.onBestScoreReceived"};this.postToParent(e),this.logger("Action Event (Get user best score)")},i.prototype.onUserInfoReceived=function(e){this.userInfoData=e,this.logger("Function Callback (onUserInfoReceived: "+e+")")},i.prototype.onBestScoreReceived=function(e){null!==e&&void 0!==e&&e>0?(this.bestScoreData=e,this.logger("Function Callback (onBestScoreReceived: "+e+")")):(this.bestScoreData=0,this.logger("Function Callback (onBestScoreReceived: "+e+", converted to: "+this.onBestScoreReceived+")"))},i.prototype.onSavedGameDataReceived=function(e){this.savedGameData=e,this.logger("Function Callback (onSavedGameDataReceived: "+e+")")};var s=new i(!0)},1398:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=n(152),_=function(e){function t(e){var n;return s(this,t),n=o(this,u(t).call(this,e,"")),n._rewardTimeStamp=JSON.parse(localStorage.getItem("RewardTimestamp"))?JSON.parse(localStorage.getItem("RewardTimestamp")):n.setRewardTimestamp(),n._getReward=!!JSON.parse(localStorage.getItem("RewardAvailable"))&&JSON.parse(localStorage.getItem("RewardAvailable")),n._styleTitle={font:"35px Orbitron-Bold",fill:"#eddf14"},n._styleScore={font:"35px Orbitron-Bold",fill:"#ffffff"},n._styleReward={font:"25px Orbitron-Bold",fill:"#ffffff"},n._scene=e,n._scene.UpdateGroup.add(c(n)),n.create(),n}return l(t,e),a(t,[{key:"setupManagers",value:function(){this._OM=this._scene.ObjManager,this._RM=this._scene.RoomManager,this._SM=this._scene.ScoreManager}},{key:"setupUI",value:function(){this._ui={menuStroke:this.setupMenuStroke(!0),rewardUI:this.setupRewardUI(),play:this.setupButton("PlayIcon",.4,240,660),restart:this.setupButton("RestartIcon",.4,240,660),topCoin:this.setupButton("Coin",.1,400,45),shop:this.setupButton("ShopIcon",.3,184,820),sound:this.setupButton(1==this._scene.Sound?"SoundOn":"SoundOff",.3,300,820),music:this.setupButton(1==this._scene.Music?"MusicOn":"MusicOff",.25,238,820),topText:this.setupText(this._styleTitle,240,140,16777215,38,15),bestText:this.setupText(this._styleScore,80,45,15589140,20,15),bestScoreText:this.setupText(this._styleScore,80,75,16777215,28,15),scoreText:this.setupText(this._styleScore,240,60,16777215,48,15),coinsText:this.setupText(this._styleScore,400,75,15589140,28,15)}}},{key:"setupButton",value:function(e,t,n,i){var s=this.setupSprite(n,i,e,15,!0,t);return s.on("pointerdown",function(e){if(1===e.buttons)switch(s.texture.key){case"PlayIcon":case"RestartIcon":this._RM.Room!=p.RoomsEnum.Shop&&(!this._scene.Sound||this._scene.sound.play("Button"),this._RM.loadGame(!1));break;case"ShopIcon":this.Room!=p.RoomsEnum.Shop&&(!this._scene.Sound||this._scene.sound.play("Button"),this._RM.loadShop());break;case"MusicOn":case"MusicOff":this._RM.Room!=p.RoomsEnum.Shop&&(this._scene.Music?(s.setTexture("MusicOff"),this._scene.Music=0):(s.setTexture("MusicOn"),this._scene.Music=1),!this._scene.Sound||this._scene.sound.play("Button"),localStorage.setItem("Music",String(this._scene.Music)));break;case"SoundOn":case"SoundOff":this._RM.Room!=p.RoomsEnum.Shop&&(this._scene.Sound?(s.setTexture("SoundOff"),this._scene.Sound=0,this._scene.sound.play("Button")):(s.setTexture("SoundOn"),this._scene.Sound=1),localStorage.setItem("Sound",String(this._scene.Sound)))}},this),s}},{key:"setupSprite",value:function(e,t,n,i,s,r,a,o){var u;return a=a||r,u=this._scene.add.image(e*this._scene.GameSpriteScale,t*this._scene.GameSpriteScale,n).setScale(r*this._scene.GameSpriteScale,a*this._scene.GameSpriteScale).setOrigin(.5).setTint(o),u.depth=i,!s||u.setInteractive(),u}},{key:"setupText",value:function(e,t,n,i,s,r){var a=this._scene.add.text(t*this._scene.GameSpriteScale,n*this._scene.GameSpriteScale,"",e);return a.setDepth(r),a.setFontSize(s*this._scene.GameSpriteScale),a.setTint(i),a.setOrigin(.5),a}},{key:"setupMenuStroke",value:function(e){var t=this.setupSprite(240,475,"Board",9,!1,.72,.65,2631720);return t.alpha=.5*e,t}},{key:"setupTimer",value:function(){this._scene.time.addEvent({delay:1e3,callback:function(){this.timerCountSeconds()},callbackScope:this,loop:!0})}},{key:"setRewardTimestamp",value:function(){var e=new Date;return{hours:e.getHours()+0,minutes:e.getMinutes()+5,seconds:e.getSeconds()+15}}},{key:"setupRewardUI",value:function(){var e,t=new Date,n={hours:0,minutes:5,seconds:49},i=this.setupSprite(423,662,"RoundedRectangle",16,!0,.93,.74,4762623),s=this.setupSprite(414,641,"GiftBoxIcon",17,!1,.44),r=this.setupText(this._styleReward,414,682,16777215,15,17),a=this.setupText(this._styleReward,414,702,16777215,15,17),o=this.setupText(this._styleReward,414,692,16777215,15,17);i.on("pointerdown",function(e){1===e.buttons&&this._getReward&&(this._rewardTimeStamp={hours:t.getHours()+0,minutes:t.getMinutes()+5,seconds:t.getSeconds()+15},this._timeStamp={hours:this._rewardTimeStamp.hours-t.getHours(),minutes:this._rewardTimeStamp.minutes-t.getMinutes(),seconds:this._rewardTimeStamp.seconds-t.getSeconds()},this.getRewardAnimation(i,this._rewardTimeStamp))},this),r.setText("REWARD IN"),a.setText("04:32:49"),o.setText("GET REWARD"),this._getReward?(r.setAlpha(0),a.setAlpha(0),o.setAlpha(1)):(r.setAlpha(1),a.setAlpha(1),o.setAlpha(0)),e={back:i,prize:s,getReward:o,reward:r,time:a,timeLeft:n};var u=this._rewardTimeStamp.hours-t.getHours(),c=this._rewardTimeStamp.minutes-t.getMinutes(),l=this._rewardTimeStamp.seconds-t.getSeconds();return u<0&&(u=0,c=0,l=0),this._timeStamp={hours:u,minutes:c,seconds:l},e}},{key:"getRewardAnimation",value:function(e,t){var n=!1,i=Phaser.Math.Between(10,50),s={back:e,sunburst:this.setupSprite(250,450,"Sunburst",18,!1,1).setAlpha(0).setAngle(0),coin:this.setupSprite(215,450,"Coin",18,!1,0),reward:this.setupText(this._styleReward,215,450,16777215,38,18).setOrigin(0,.5).setScale(0).setText(String(i))};this._getReward=!1,this.setupRewardTweens(s),e.on("pointerdown",function(r){1===r.buttons&&!n&&e.scaleX>12&&(n=!0,this._SM.AllCoins+=i,this.resetRewardTweens(s),localStorage.setItem("RewardTimestamp",JSON.stringify(t)),localStorage.setItem("RewardAvailable",JSON.stringify(this._getReward)))},this)}},{key:"setupRewardTweens",value:function(e){var t=this._scene.add.tween({targets:[this._ui.rewardUI.getReward,this._ui.rewardUI.prize],ease:"Quad",duration:200,alpha:0,onComplete:function(){t.stop()}}),n=this._scene.add.tween({targets:[e.back],ease:"Quad",duration:600,scaleX:15*this._scene.GameSpriteScale,scaleY:15*this._scene.GameSpriteScale,onComplete:function(){n.stop()}}),i=this._scene.add.tween({targets:[e.sunburst],ease:"Quad",duration:600,alpha:.1,onComplete:function(){i.stop()}}),s=this._scene.add.tween({targets:[e.sunburst],ease:"Linear",duration:35e3,angle:360,repeat:-1,onComplete:function(){s.resetTweenData(!0)}}),r=this._scene.add.tween({targets:[e.reward],ease:"Bounce.easeOut",duration:800,scaleX:.8*this._scene.GameSpriteScale,scaleY:.8*this._scene.GameSpriteScale,x:240*this._scene.GameSpriteScale,onComplete:function(){r.stop()}}),a=this._scene.add.tween({targets:[e.coin],ease:"Bounce.easeOut",duration:800,scaleX:.2*this._scene.GameSpriteScale,scaleY:.2*this._scene.GameSpriteScale,onComplete:function(){a.stop()}})}},{key:"resetRewardTweens",value:function(e){var t=this._scene.add.tween({targets:[this._ui.rewardUI.prize],ease:"Quad",duration:200,delay:400,alpha:1,onComplete:function(){t.stop()}}),n=this._scene.add.tween({targets:[e.back],ease:"Quad",duration:600,scaleX:.93*this._scene.GameSpriteScale,scaleY:.74*this._scene.GameSpriteScale,onComplete:function(){n.stop()}}),i=this._scene.add.tween({targets:[e.sunburst],ease:"Quad",duration:600,alpha:0,onComplete:function(){e.sunburst.destroy(),i.stop()}}),s=this._scene.add.tween({targets:[e.sunburst],ease:"Quad",duration:600,alpha:0,onComplete:function(){e.sunburst.destroy(),s.stop()}}),r=this._scene.add.tween({targets:[e.reward],ease:"Quad",delay:200,duration:500,x:414*this._scene.GameSpriteScale,y:641*this._scene.GameSpriteScale,scaleX:0,scaleY:0,angle:45,alpha:0,onComplete:function(){e.reward.destroy(),r.stop()}}),a=this._scene.add.tween({targets:[e.coin],ease:"Quad",delay:200,duration:500,x:414*this._scene.GameSpriteScale,y:641*this._scene.GameSpriteScale,scaleX:0,scaleY:0,angle:45,alpha:0,onComplete:function(){e.coin.destroy(),a.stop()}}),o=this._scene.add.tween({targets:[this._ui.rewardUI.reward,this._ui.rewardUI.time],ease:"Quad",duration:500,alpha:1,onComplete:function(){o.stop()}}),u=this._scene.add.tween({targets:[this._ui.rewardUI.getReward],ease:"Quad",duration:500,alpha:0,onComplete:function(){u.stop()}})}},{key:"timerCountSeconds",value:function(){this._getReward||(this._timeStamp.hours<=0&&this._timeStamp.minutes<=0&&this._timeStamp.seconds<=0&&this.setGetRewardValues(),this._timeStamp.seconds<=0?(this._timeStamp.seconds=59,this._timeStamp.minutes--):this._timeStamp.seconds--,this._timeStamp.minutes<=0&&(this._timeStamp.hours>0?(this._timeStamp.minutes=59,this._timeStamp.hours--):this._timeStamp.minutes=0))}},{key:"setGetRewardValues",value:function(){var e=this._scene.add.tween({targets:[this._ui.rewardUI.reward,this._ui.rewardUI.time],ease:"Quad",duration:500,alpha:0,onComplete:function(){e.stop()}}),t=this._scene.add.tween({targets:[this._ui.rewardUI.getReward],ease:"Quad",duration:500,alpha:1,onComplete:function(){t.stop()}});this._timeStamp.hours=0,this._timeStamp.minutes=0,this._timeStamp.seconds=0,this._getReward=!0,localStorage.setItem("RewardAvailable",JSON.stringify(this._getReward))}},{key:"updateUI",value:function(){this._ui.topText.setText(this._RM.Room==p.RoomsEnum.Menu?"BALL LINE":"GAME OVER"),this._ui.bestText.setText("Best"),this._ui.bestScoreText.setText(String(this._SM.BestScore)),this._ui.scoreText.setText(String(this._SM.Score)),this._ui.coinsText.setText(String(this._RM.Room==p.RoomsEnum.Game?this._SM.Coins:this._SM.AllCoins)),this._RM.Room==p.RoomsEnum.Menu?(this._ui.restart.visible=!1,this._ui.play.visible=!0):this._RM.Room==p.RoomsEnum.GameOver&&(this._ui.play.visible=!1,this._ui.restart.visible=!0),this.updateRewardTimer()}},{key:"updateRewardTimer",value:function(){var e=this._ui.rewardUI.timeLeft.hours,t=this._ui.rewardUI.timeLeft.minutes,n=this._ui.rewardUI.timeLeft.seconds;this._ui.rewardUI.timeLeft.hours=this._timeStamp.hours,this._ui.rewardUI.timeLeft.minutes=this._timeStamp.minutes,this._ui.rewardUI.timeLeft.seconds=this._timeStamp.seconds,this._ui.rewardUI.time.setText((e>=10?e:"0"+e)+":"+(t>=10?t:"0"+t)+":"+(n>=10?Math.floor(n):"0"+Math.floor(n)))}},{key:"setVisibleMenuUI",value:function(e){this._ui.topText.visible=e,this._ui.menuStroke.visible=e,this._ui.play.visible=e,this._ui.restart.visible=e,this._ui.sound.visible=e,this._ui.music.visible=e,this._ui.shop.visible=e,this._ui.rewardUI.back.visible=e,this._ui.rewardUI.prize.visible=e,this._ui.rewardUI.getReward.visible=e,this._ui.rewardUI.reward.visible=e,this._ui.rewardUI.time.visible=e}},{key:"create",value:function(){this.setupUI(),this.timerCountSeconds(),this.setupTimer()}},{key:"update",value:function(){this.updateUI()}}]),t}(Phaser.GameObjects.GameObject);t.MenuUI=_},1399:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=function(e){function t(){return s(this,t),o(this,c(t).call(this,{key:"Preloader"}))}return l(t,e),a(t,[{key:"preload",value:function(){this.load.image("Save","./assets/sprites/Editor/save.png"),this.load.image("Load","./assets/sprites/Editor/load.png"),this.load.image("Minus","./assets/sprites/Editor/minus.png"),this.load.image("Plus","./assets/sprites/Editor/plus.png"),this.load.image("Curve","./assets/sprites/Editor/curve.png"),this.load.image("RoundedRectangle","./assets/sprites/Menu/rounded.png"),this.load.image("MenuCircle","./assets/sprites/Menu/circle.png"),this.load.image("GiftBoxIcon","./assets/sprites/Menu/giftbox.png"),this.load.image("Sunburst","./assets/sprites/Menu/sunburst.png"),this.load.image("ShopIcon","./assets/sprites/Menu/cube.png"),this.load.image("MusicOff","./assets/sprites/Menu/music_off.png"),this.load.image("MusicOn","./assets/sprites/Menu/music_on.png"),this.load.image("SoundOff","./assets/sprites/Menu/sound_off.png"),this.load.image("SoundOn","./assets/sprites/Menu/sound_on.png"),this.load.image("PlayIcon","./assets/sprites/Menu/play.png"),this.load.image("RestartIcon","./assets/sprites/Menu/restart.png"),this.load.image("LockIcon","./assets/sprites/Menu/lock.png"),this.load.image("UnlockIcon","./assets/sprites/Menu/unlock.png"),this.load.image("ShopTop","./assets/sprites/Shop/backTop.png"),this.load.image("ShopBackground","./assets/sprites/Shop/back.png"),this.load.image("Exit","./assets/sprites/Shop/exit.png"),this.load.image("Board","./assets/sprites/Menu/Board.png"),this.load.image("Player_Circle","./assets/sprites/circle.png"),this.load.image("Player_Cannon","./assets/sprites/Balls/cannon.png"),this.load.image("Player_CannonBack","./assets/sprites/Balls/cannon_back.png"),this.load.image("ShopBack","./assets/BACK.png"),this.load.image("Bomb","./assets/sprites/Balls/bomb.png"),this.load.image("Coin","./assets/sprites/Balls/coin.png");for(var e=1;e<=6;e++)for(var t=0;t<3;t++){var n=String.fromCharCode(97+t);this.load.image("Ball_"+String(e)+"_"+String(n),"./assets/sprites/Balls/"+String(e)+String(n)+".png")}for(var i=1;i<=5;i++)this.load.image("Background_"+String(i),"./assets/sprites/Backgrounds/bg"+String(i)+".png");this.load.atlas("ComboShape","assets/particles/Combo/shapes.png","assets/particles/Combo/shapes.json"),this.load.atlas("CannonShape","assets/particles/Cannon/shapes.png","assets/particles/Cannon/shapes.json"),this.load.text("ComboEffect","assets/particles/Combo/combo.json"),this.load.text("CannonEffect","assets/particles/Cannon/cannon.json"),this.load.audio("Track1","./assets/sounds/song.mp3"),this.load.audio("Button","./assets/sounds/button.mp3"),this.load.audio("Tick","./assets/sounds/tick.mp3"),this.load.audio("Score","./assets/sounds/score.mp3"),this.load.audio("Coin","./assets/sounds/fcoin.mp3"),this.load.audio("Explosion","./assets/sounds/explosion.mp3"),this.load.audio("Failed","./assets/sounds/failed.mp3");for(var s=1;s<=10;s++)this.load.image("LevelBack_"+String(s),"./assets/sprites/levels/Level "+String(s)+".png");this.load.image("EditorDragPoint","./assets/sprites/dot.png"),this.load.image("EditorCoin","./assets/sprites/Editor/coin.png"),this.load.image("EditorCube","./assets/sprites/Editor/cube.png");for(var r=1;r<=10;r++)this.load.json("Level"+String(r),"./assets/levels/level"+String(r)+".json");this.load.once("complete",function(){this.scene.start("MainScene")},this)}}]),t}(Phaser.Scene);t.default=p},152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Menu=0]="Menu",e[e.Game=1]="Game",e[e.Shop=2]="Shop",e[e.GameOver=3]="GameOver",e[e.Editor=4]="Editor"}(t.RoomsEnum||(t.RoomsEnum={}))},502:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=n(152),_=function(e){function t(e,n,i){var r;return s(this,t),r=o(this,u(t).call(this,e,"")),r._index=-1,r._isCheckedForCombo=!1,r._isDestroying=!1,r._tweenValue=0,r._ballInsertAnimation=0,r._id=-1,r._countID=-1,r._tweenStart=-1,r._next=null,r._prev=null,r._isMover=!1,r._isMoving=!1,r.MoveBackwards=!1,r.MoveForwards=!1,r.MFStep=0,r.overlapCollider=null,r._isAlive=!0,r._scene=e,r._type=n,r._index=i,r._RM=e.RoomManager,r._OM=e.ObjManager,r._SM=e.ScoreManager,r._MU=e.MenuUI,r._scene.UpdateGroup.add(c(r)),r.create(),r}return l(t,e),a(t,[{key:"defineManagers",value:function(){this._RM=this._scene.RoomManager,this._OM=this._scene.ObjManager,this._SM=this._scene.ScoreManager,this._MU=this._scene.MenuUI}},{key:"setupParticles",value:function(){var e=this._scene.add.particles("ComboShape",new Function("return "+this._scene.cache.text.get("ComboEffect"))());e.active=!0,e.depth=8,this._particlesEmitter=e}},{key:"setupSprite",value:function(){var e=String.fromCharCode(97+this._index),t=this._scene.physics.add.image(0,0,"Ball_"+String(this._type)+"_"+String(e)).setScale(.105*this._scene.GameSpriteScale).setOrigin(.5),n=.5*t.width;return t.depth=6,t.angle=Phaser.Math.Between(0,360),this.setupPhysics(t,n),t}},{key:"setupPhysics",value:function(e,t){this._scene.BallsPhysicsGroup.add(e),e.body.setCircle(t,0,0),e.body.data={object:this}}},{key:"setupDebugEnvironment",value:function(){this.graphics=this._scene.add.graphics(),this.graphics.depth=15,this.line=new Phaser.Geom.Line(0,0,0,0),this.line2=new Phaser.Geom.Line(0,0,0,0);var e={font:"15px Arial",fill:"#000000",align:"center"};this._idtext=this._scene.add.text(this.Sprite.x,this.Sprite.y,"0",e),this._idtext.depth=16,this._idtext.visible=!1}},{key:"animationManagment",value:function(e,t,n,i){var s=this;this._scene.add.tween({targets:[this._sprite],ease:"Quad",duration:n,delay:0,scaleX:e*this._scene.GameSpriteScale,scaleY:e*this._scene.GameSpriteScale,angle:0,alpha:t,onComplete:function(){!i||s.destroy()}})}},{key:"destroy",value:function(){this._isAlive&&(this._isAlive=!1,this._OM.BallArray[this.CountID]=null,this._next&&this._isMover&&(this._next._isMover=!0),this._prev&&(this._prev.NextBall=null,this._prev=null),this._next&&(this._next.PrevBall=null,this._next=null),this._OM.countBalls(),this._sprite.destroy())}},{key:"movement",value:function(){var e;this.tweenMovementControl(this._scene.BallsAreStopped),e=this._scene.computeBallRealPosition(this._tweenStart,this._tweenStart+32*this._scene.GameSpriteScale,this._tweenValue),this._sprite.x=e.x,this._sprite.y=e.y}},{key:"tweenMovementControl",value:function(e){var t=this._tweenStart+32*this._scene.GameSpriteScale,n=this._tweenStart-32*this._scene.GameSpriteScale;this._tweenValue<1?e||2==this._ballInsertAnimation?this.MoveForwards&&(this._tweenValue+=this.MFStep,!this._next||(this._next.MoveForwards=!0),!this._next||(this._next.MFStep=this.MFStep)):this._isMover?(this._tweenValue+=this._RM.BallSpeed,this._isMoving=!0):!this._prev||this.MoveBackwards||this.MoveForwards?(this.MoveBackwards?(this._tweenValue-=4*this._RM.BallSpeed,!this._next||(this._next.MoveBackwards=!0),this._tweenValue<=0&&this.setPrevPosition(n)):this.MoveForwards&&(this._tweenValue+=this.MFStep,!this._next||(this._next.MoveForwards=!0)),this._isMoving=!1):this._prev.IsMoving&&(this._prev.BallInsertAnimation||(this._tweenValue=this._prev.TweenValue,this._tweenStart=this._prev.TweenStart+32*this._scene.GameSpriteScale),this._isMoving=!0):this.setNewPosition(t)}},{key:"setNewPosition",value:function(e){var t=this._OM.PathObject.PathPoints;if(this._tweenValue>=1)if(this._tweenValue=this._tweenValue-1,e>=this._pointsArrayLength-32*this._scene.GameSpriteScale||e<0){var n=e<0?0:this._tweenStart;this._tweenPosition=t[n],e<0?this._tweenStart+=32*this._scene.GameSpriteScale:this._tweenValue=1}else this._tweenStart+=32*this._scene.GameSpriteScale,this._tweenPosition=t[this._tweenStart]}},{key:"setPrevPosition",value:function(e){var t=this._OM.PathObject.PathPoints;this._tweenValue<=0&&(this._tweenValue=this._tweenValue+1,this._tweenStart-=32*this._scene.GameSpriteScale,this._tweenPosition=t[this._tweenStart])}},{key:"moveAllNextBalls",value:function(e,t,n){this._ballInsertAnimation=n,2==n&&(this._tweenValue+=t),this._next&&this._next.moveAllNextBalls(e,t,1)}},{key:"checkForCombo",value:function(e,t){var n=e?this._next:this._prev;if(-1!==t){if(null!==n&&this._scene.BallsInComboArray.length<6)return n.IsCheckedForCombo=!0,this._scene.BallsInComboArray.push(n),void n.checkForCombo(e,1);this.callComboEnd(!0)}else{if(null!==n&&!n.IsCheckedForCombo&&n.SpriteIndex===this._index)return n.IsCheckedForCombo=!0,this._scene.BallsInComboArray.push(n),void n.checkForCombo(e,-1);this.callComboEnd(!1)}}},{key:"callComboEnd",value:function(e){var t=this,n=this._scene.BallsInComboArray;++this._scene.ComboEndedSide<2||(this._scene.ComboEndedSide=0,n.forEach(function(e){e.IsCheckedForCombo=!1}),(n.length>=3||e)&&(!this._scene.Sound||this._scene.sound.play("Score"),this._SM.Score+=n.length,n.sort(function(e,t){return e.ID-t.ID}),n[n.length-1].NextBall&&(n[0].IsMover||(n[n.length-1].NextBall.MoveBackwards=!0)),n.forEach(function(e){e.ParticlesEmitter.createEmitter({active:!0,visible:!0,collideBottom:!0,collideLeft:!0,collideRight:!0,collideTop:!0,on:!1,particleBringToTop:!0,radial:!0,frame:{frames:["symbol_01"],cycle:!1,quantity:0},frequency:0,gravityX:0,gravityY:0,maxParticles:10,timeScale:1,blendMode:0,accelerationX:0,accelerationY:0,alpha:{start:1,end:0,ease:"Circ.easeIn"},angle:{ease:"Sine.easeIn",min:0,max:360},bounce:0,delay:0,lifespan:{ease:"Quart.easeOut",min:500,max:1e3},maxVelocityX:1e4,maxVelocityY:1e4,moveToX:0,moveToY:0,quantity:4,rotate:{ease:"Quad.easeIn",min:0,max:360},scale:{start:0,end:4*t._scene.GameSpriteScale,ease:"Quad.easeOut"},speed:{ease:"Linear",min:3,max:100},tint:15913002}).emitParticleAt(e.Sprite.x,e.Sprite.y,125),e.animationManagment(.15,0,100,!0)})))}},{key:"collideWithOtherChain",value:function(e,t){var n=e.body.data.object,i=t.body.data.object;i.ID===n.ID+1&&null===i.PrevBall&&null===n.NextBall&&(i.PrevBall=n,n.NextBall=i,this._OM.BallArray.forEach(function(e){null!=e&&(e.MoveBackwards=!1)}),i.SpriteIndex==n.SpriteIndex&&(this._scene.BallsInComboArray=[n],n.IsCheckedForCombo=!0,n.checkForCombo(!0,-1),n.checkForCombo(!1,-1)))}},{key:"collideWithEndOfPath",value:function(e,t){var n=e.body.data.object;!n._isDestroying&&n._RM.IsPlaying&&(n._isDestroying=!0,n._RM.IsGameOver||(n._RM.IsGameOver=!0,this._scene.BallsAreStopped=!1,!n._scene.Sound||n._scene.sound.play("Failed")))}},{key:"drawID",value:function(){this._idtext.visible=!!this._isAlive,this._idtext.text=""+this.ID,this._idtext.x=this.Sprite.x,this._idtext.y=this.Sprite.y,this._idtext.setOrigin(.5)}},{key:"drawLines",value:function(e,t){this.lineManagment(e,t),this.graphics.clear(),this.graphics.lineStyle(5,267386880,1),null!=this._prev&&this.graphics.strokeLineShape(e),this.graphics.lineStyle(5,65280,1),null!=this._next&&this.graphics.strokeLineShape(t)}},{key:"lineManagment",value:function(e,t){var n,i;n=this._prev?this._prev:this,i=this._next?this._next:this,e.x1=this._sprite.x,e.y1=this._sprite.y,e.x2=n._sprite.x,e.y2=n._sprite.y-10,t.x1=this._sprite.x,t.y1=this._sprite.y,t.x2=i._sprite.x,t.y2=i._sprite.y+10}},{key:"debugUpdate",value:function(){this._scene.Debug&&(this.drawLines(this.line,this.line2),this.drawID())}},{key:"create",value:function(){this._sprite=this.setupSprite(),this._pointsArrayLength=this._OM.PathObject.PathPoints.length,this.defineManagers(),this.setupDebugEnvironment(),this.setupParticles()}},{key:"update",value:function(){this._isAlive&&(this._RM.IsPlaying||this._RM.Room===p.RoomsEnum.Editor)&&this._sprite&&(this._isDestroying&&this.animationManagment(0,0,100,!0),this.movement(),this.ballsBehaviour()),this.debugUpdate()}},{key:"ballsBehaviour",value:function(){this._scene.physics.overlap(this._sprite,this._scene.EndOfPathPhysicsGroup,this.collideWithEndOfPath.bind(this)),null===this._next||null===this._prev?(this._scene.Debug&&this._sprite.setTint(7434609),this.overlapCollider=this._scene.physics.overlap(this._sprite,this._scene.BallsPhysicsGroup,this.collideWithOtherChain.bind(this))):null!==this.overlapCollider&&(this._scene.Debug&&this._sprite.setTint(16777215),this._scene.physics.world.removeCollider(this.overlapCollider)),this._next&&this._id<this._next.ID&&this._prev===this._next&&(this._prev=null,this._next.NextBall=null),this._prev&&this._id>this._prev.ID&&this._prev===this._next&&(this._next=null,this._prev.PrevBall=null)}},{key:"SpriteIndex",get:function(){return this._index}},{key:"IsCheckedForCombo",get:function(){return this._isCheckedForCombo},set:function(e){this._isCheckedForCombo=e}},{key:"TweenValue",get:function(){return this._tweenValue},set:function(e){this._tweenValue=e}},{key:"BallInsertAnimation",get:function(){return this._ballInsertAnimation},set:function(e){this._ballInsertAnimation=e}},{key:"ID",get:function(){return this._id},set:function(e){this._id=e}},{key:"CountID",get:function(){return this._countID},set:function(e){this._countID=e}},{key:"TweenStart",get:function(){return this._tweenStart},set:function(e){this._tweenStart=e}},{key:"TweenPosition",get:function(){return this._tweenPosition},set:function(e){this._tweenPosition=e}},{key:"NextBall",get:function(){return this._next},set:function(e){this._next=e}},{key:"PrevBall",get:function(){return this._prev},set:function(e){this._prev=e}},{key:"IsMover",get:function(){return this._isMover},set:function(e){this._isMover=e}},{key:"IsMoving",get:function(){return this._isMoving},set:function(e){this._isMoving=e}},{key:"Sprite",get:function(){return this._sprite}},{key:"ParticlesEmitter",get:function(){return this._particlesEmitter}}]),t}(Phaser.GameObjects.GameObject);t.Ball=_},503:function(e,t,n){e.exports=n(504)},504:function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(238);var s=i(n(1387)),r=i(n(1399)),a={type:Phaser.AUTO,resolution:1,backgroundColor:"#282828",render:{antialias:!0,roundPixels:!0},scene:[r.default,s.default],scale:{parent:"content",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:720,height:1350},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}}};new Phaser.Game(a)}},[503]);